"use strict";(globalThis.webpackChunkdocs_worklets=globalThis.webpackChunkdocs_worklets||[]).push([[3455],{4361:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"bundleMode/usage","title":"Usage","description":"Running third party libraries in Worklets","source":"@site/docs/bundleMode/usage.mdx","sourceDirName":"bundleMode","slug":"/bundleMode/usage","permalink":"/react-native-worklets/docs/bundleMode/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/docs-worklets/docs/bundleMode/usage.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Setup","permalink":"/react-native-worklets/docs/bundleMode/setup"},"next":{"title":"Threading","permalink":"/react-native-worklets/docs/category/threading"}}');var i=t(47671),r=t(30620);const s={sidebar_position:3},a="Usage",l={},d=[{value:"Running third party libraries in Worklets",id:"running-third-party-libraries-in-worklets",level:2},{value:"Running network requests in Worklets",id:"running-network-requests-in-worklets",level:2},{value:"Reference",id:"reference",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"usage",children:"Usage"})}),"\n",(0,i.jsx)(n.h2,{id:"running-third-party-libraries-in-worklets",children:"Running third party libraries in Worklets"}),"\n",(0,i.jsx)(n.p,{children:"Third party libraries have to be on an allow-list to use them in worklets. This is because libraries can come with side-effects that would break a Worklet Runtime. For instance, a library that imports something from React Native can't be used on a Worklet Runtime. This would load a second instance of React Native and break your app."}),"\n",(0,i.jsxs)(n.p,{children:["To add a library to the allow-list you only need to set the ",(0,i.jsx)(n.code,{children:"workletizableModules"})," option in Worklets Babel plugin, which is an array of library names. For instance, if you want to use ",(0,i.jsx)(n.code,{children:"my-library"})," on a Worklet Runtime."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"/** @type {import('react-native-worklets/plugin').PluginOptions} */\nconst workletsPluginOptions = {\n  bundleMode: true,\n  strictGlobal: true, // optional, but recommended\n  // highlight-next-line\n  workletizableModules: ['my-library'],\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"workletizableModules"})," API is temporary and will be replaced with a more robust solution in the future."]}),"\n",(0,i.jsx)(n.h2,{id:"running-network-requests-in-worklets",children:"Running network requests in Worklets"}),"\n",(0,i.jsxs)(n.p,{children:["In React Native ecosystem, new JavaScript runtimes don't come with networking capabilities out of the box. Worklets library provides a simplified version of ",(0,i.jsx)(n.code,{children:"fetch"})," API that can be used on Worklet Runtimes - however, it might not be sufficient for all use cases."]}),"\n",(0,i.jsxs)(n.p,{children:["For this reason, to enable ",(0,i.jsx)(n.code,{children:"fetch"})," on Worklet Runtimes you have to toggle the ",(0,i.jsx)(n.code,{children:"FETCH_PREVIEW_ENABLED"})," static feature flag in your app's ",(0,i.jsx)(n.code,{children:"package.json"}),". You can find instructions on how to enable it ",(0,i.jsx)(n.a,{href:"/docs/guides/feature-flags",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Running ",(0,i.jsx)(n.code,{children:"fetch"})," also requires installing all the patches from the ",(0,i.jsx)(n.a,{href:"/docs/bundleMode/setup",children:"Bundle Mode setup guide"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["We are currently looking for third-party networking solutions that would provide same networking capabilities on Worklet Runtimes as what's available on the RN Runtime. We are open to adopting or integrating with such solutions. If you know about such solutions, please reach out to us on ",(0,i.jsx)(n.a,{href:"https://github.com/software-mansion/react-native-reanimated/issues",children:"GitHub"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsxs)(n.p,{children:["To see how the setup looks in a real project, you can check out the ",(0,i.jsx)(n.a,{href:"https://github.com/software-mansion-labs/Bundle-Mode-showcase-app",children:"Bundle Mode Showcase App"})," repository."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},30620:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(39471);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);