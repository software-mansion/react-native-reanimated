"use strict";(globalThis.webpackChunkdocs_worklets=globalThis.webpackChunkdocs_worklets||[]).push([[3869],{30620:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>s});var t=r(39471);const i={},a=t.createContext(i);function l(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(a.Provider,{value:n},e.children)}},79425:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"memory/createSerializable","title":"createSerializable","description":"Recursively converts JavaScript values into Serializable references that can be passed to different JavaScript Runtimes.","source":"@site/docs/memory/createSerializable.mdx","sourceDirName":"memory","slug":"/memory/createSerializable","permalink":"/react-native-worklets/docs/memory/createSerializable","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/docs-worklets/docs/memory/createSerializable.mdx","tags":[],"version":"current","sidebarPosition":42,"frontMatter":{"sidebar_position":42},"sidebar":"tutorialSidebar","previous":{"title":"Memory","permalink":"/react-native-worklets/docs/category/memory"},"next":{"title":"createSynchronizable","permalink":"/react-native-worklets/docs/memory/createSynchronizable"}}');var i=r(47671),a=r(30620);const l={sidebar_position:42},s="createSerializable",o={},c=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:2},{value:"value",id:"value",level:3},{value:"Returns",id:"returns",level:3},{value:"Remarks",id:"remarks",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:r,SerializableSupportedTypesTable:t}=n;return r||h("Details",!0),t||h("SerializableSupportedTypesTable",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"createserializable",children:"createSerializable"})}),"\n",(0,i.jsxs)(n.p,{children:["Recursively converts JavaScript values into ",(0,i.jsx)(n.a,{href:"/docs/memory/serializable",children:"Serializable"})," references that can be passed to different JavaScript Runtimes."]}),"\n",(0,i.jsxs)(n.p,{children:["The returned reference cannot be manipulated as it doesn't represent any standard JavaScript object. Changes to the original value don't affect the ",(0,i.jsx)(n.code,{children:"Serializable"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Functions like ",(0,i.jsx)(n.code,{children:"scheduleOnUI"}),", ",(0,i.jsx)(n.code,{children:"runOnUISync"}),", ",(0,i.jsx)(n.code,{children:"scheduleOnRuntime"})," etc. automatically convert values to Serializable references."]})}),"\n",(0,i.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { createSerializable, scheduleOnUI } from 'react-native-worklets';\n\nconst object = {\n  a: 1,\n  b: 2,\n  c: 3,\n};\n\nconst serializableRef = createSerializable(object);\n"})}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Type definitions"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function createSerializable<TValue>(value: TValue): SerializableRef<TValue>;\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"arguments",children:"Arguments"}),"\n",(0,i.jsx)(n.h3,{id:"value",children:"value"}),"\n",(0,i.jsx)(n.p,{children:"The JavaScript value to be converted into a Serializable reference. It must be one of the supported types listed below."}),"\n",(0,i.jsx)(t,{}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["In development builds, the ",(0,i.jsx)(n.code,{children:"value"})," argument is ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze",children:"frozen"})," after serialization. This prevents misconceptions that changes to the original value would update the already created Serializable."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { createSerializable, scheduleOnUI } from 'react-native-worklets';\n\nconst object = {\n  a: 1,\n  b: 2,\n  c: 4,\n};\n\nobject.c = 3; // <-- Correct: you can modify the object before serializing it\n\nscheduleOnUI(() => {\n  // `object` was implicitly serialized with `createSerializable` when passed to `scheduleOnUI`.\n  console.log(object); // { a: 1, b: 2, c: 3 }\n});\n\nobject.a = 10; // <-- Warning: You can't mutate the object after serializing it\n"})})]}),"\n",(0,i.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"SerializableRef"})," - a reference to the Serializable representation of the input value."]}),"\n",(0,i.jsx)(n.h2,{id:"remarks",children:"Remarks"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This function automatically detects the type of the input value and applies appropriate serialization strategies."}),"\n",(0,i.jsx)(n.li,{children:"For objects and arrays, it recursively processes nested properties."}),"\n",(0,i.jsx)(n.li,{children:"This function is rarely used as in almost all cases Worklets handle the creation of Serializables for you."}),"\n",(0,i.jsx)(n.li,{children:"This function includes cycle detection to prevent infinite recursion."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"jsi::NativeState"})," of a passed value is preserved during serialization."]}),"\n",(0,i.jsxs)(n.li,{children:["Outside of ",(0,i.jsx)(n.a,{href:"/docs/experimental/bundleMode",children:"Bundle Mode"}),", ",(0,i.jsx)(n.code,{children:"createSerializable"})," can be called only on the ",(0,i.jsx)(n.a,{href:"/docs/fundamentals/runtimeKinds#rn-runtime",children:"RN Runtime"}),". In Bundle Mode, it can be called from any Runtime. If you need to create a Serializable on a ",(0,i.jsx)(n.a,{href:"/docs/fundamentals/runtimeKinds#worklet-runtime",children:"Worklet Runtime"})," outside of Bundle Mode, use deprecated ",(0,i.jsx)(n.a,{href:"/docs/memory/makeShareableCloneOnUIRecursive",children:"makeShareableCloneOnUIRecursive"})," instead."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);