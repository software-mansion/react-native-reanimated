"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[7729],{2244:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(96540);const o="collapseButton_X7H2",i="arrow_XdVJ";var s;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}const r=e=>{let{title:t,titleId:n,...o}=e;return a.createElement("svg",l({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},o),t?a.createElement("title",{id:n},t):null,s||(s=a.createElement("path",{d:"m1 1 5 5 5-5",stroke:"#001A72",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};var d;function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}const u=e=>{let{title:t,titleId:n,...o}=e;return a.createElement("svg",c({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},o),t?a.createElement("title",{id:n},t):null,d||(d=a.createElement("path",{d:"m1 1 5 5 5-5",stroke:"#F8F9FF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};var m=n(95293),p=n(20053);const h=e=>{let{label:t,labelCollapsed:n,collapsed:s,onCollapse:l,className:d}=e;const{colorMode:c}=(0,m.G)();return a.createElement("div",{className:(0,p.default)(o,d),"data-collapsed":s,onClick:()=>l()},"light"===c?a.createElement(r,{className:i}):a.createElement(u,{className:i}),a.createElement("button",null,s?n:t))}},5308:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(96540),o=n(22355);const i={container:"container_oGcb",collapseButton:"collapseButton_YVdr"};var s=n(2244);function l(e){let{src:t,showLines:n}=e;const[l,r]=(0,a.useState)(!0);if(!n)return a.createElement(o.A,{language:"jsx"},t);const[d,c]=n,u=t.split("\n").slice(d,c+1).join("\n");return a.createElement("div",{className:i.container},a.createElement(s.A,{label:"Collapse the full code",labelCollapsed:"Expand the full code",collapsed:l,onCollapse:()=>r(!l),className:i.collapseButton}),a.createElement(o.A,{language:"jsx"},l?u:t))}},47417:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(96540),o=n(70690),i=n(68444),s=n(9176),l=n(72188),r=n(52747);const d=r.default.createAnimatedComponent(o.A),c={duration:1200,overshootClamping:!0,dampingRatio:.8},u={code:"function FloatingActionButtonJs1(){const{isExpanded,OFFSET,index,withSpring,SPRING_CONFIG,withDelay,withTiming}=this.__closure;const moveValue=isExpanded.value?OFFSET*index:0;const translateValue=withSpring(-moveValue,SPRING_CONFIG);const delay=index*100;const scaleValue=isExpanded.value?1:0;return{transform:[{translateY:translateValue},{scale:withDelay(delay,withTiming(scaleValue))}]};}"},m=e=>{let{isExpanded:t,index:n,buttonLetter:o}=e;const i=(0,r.useAnimatedStyle)(function(){const e=function(){const e=t.value?60*n:0,a=(0,r.withSpring)(-e,c),o=100*n,i=t.value?1:0;return{transform:[{translateY:a},{scale:(0,r.withDelay)(o,(0,r.withTiming)(i))}]}};return e.__closure={isExpanded:t,OFFSET:60,index:n,withSpring:r.withSpring,SPRING_CONFIG:c,withDelay:r.withDelay,withTiming:r.withTiming},e.__workletHash=6130628784941,e.__initData=u,e}());return a.createElement(d,{style:[i,y.shadow,y.button]},a.createElement(r.default.Text,{style:y.content},o))},p={code:"function FloatingActionButtonJs2(){const{interpolate,isExpanded,withTiming}=this.__closure;const moveValue=interpolate(Number(isExpanded.value),[0,1],[0,2]);const translateValue=withTiming(moveValue);const rotateValue=isExpanded.value?'45deg':'0deg';return{transform:[{translateX:translateValue},{rotate:withTiming(rotateValue)}]};}"};function h(){const e=(0,r.useSharedValue)(!1),t=(0,r.useAnimatedStyle)(function(){const t=function(){const t=(0,r.interpolate)(Number(e.value),[0,1],[0,2]),n=(0,r.withTiming)(t),a=e.value?"45deg":"0deg";return{transform:[{translateX:n},{rotate:(0,r.withTiming)(a)}]}};return t.__closure={interpolate:r.interpolate,isExpanded:e,withTiming:r.withTiming},t.__workletHash=4309117046009,t.__initData=p,t}());return a.createElement(i.A,null,a.createElement(s.A,{style:y.mainContainer},a.createElement(s.A,{style:y.buttonContainer},a.createElement(d,{onPress:()=>{e.value=!e.value},style:[y.shadow,g.button]},a.createElement(r.default.Text,{style:[t,g.content]},"+")),a.createElement(m,{isExpanded:e,index:1,buttonLetter:"M"}),a.createElement(m,{isExpanded:e,index:2,buttonLetter:"W"}),a.createElement(m,{isExpanded:e,index:3,buttonLetter:"S"}))))}const g=l.A.create({button:{zIndex:1,height:56,width:56,borderRadius:100,backgroundColor:"#b58df1",display:"flex",justifyContent:"center",alignItems:"center"},content:{fontSize:24,color:"#f8f9ff"}}),y=l.A.create({mainContainer:{position:"relative",height:260,width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center"},button:{width:40,height:40,backgroundColor:"#82cab2",position:"absolute",borderRadius:100,display:"flex",justifyContent:"center",alignItems:"center",zIndex:-2,flexDirection:"row"},buttonContainer:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},shadow:{shadowColor:"#171717",shadowOffset:{width:-.5,height:3.5},shadowOpacity:.2,shadowRadius:3},content:{color:"#f8f9ff",fontWeight:500}})},25765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>w,frontMatter:()=>r,metadata:()=>c,toc:()=>m});var a=n(58168),o=(n(96540),n(15680)),i=n(47417),s=n(20804),l=n(5308);const r={slug:"floatingactionbutton",title:"Floating Action Button"},d=void 0,c={permalink:"/react-native-reanimated/examples/floatingactionbutton",source:"@site/blog/floating-action-button.md",title:"Floating Action Button",description:"Floating Action Button provides user with easy-accessible panel with primary or most common actions on the screen.",date:"2025-03-13T08:51:31.000Z",formattedDate:"March 13, 2025",tags:[],hasTruncateMarker:!1,authors:[],frontMatter:{slug:"floatingactionbutton",title:"Floating Action Button"},prevItem:{title:"Flip Card",permalink:"/react-native-reanimated/examples/flipCard"},nextItem:{title:"Marquee",permalink:"/react-native-reanimated/examples/marquee"}},u={authorsImageUrls:[]},m=[],p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.yg)("div",t)},h=p("InteractiveExample"),g=p("ExampleVideo"),y={toc:m},f="wrapper";function w(e){let{components:t,...n}=e;return(0,o.yg)(f,(0,a.A)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Floating Action Button provides user with easy-accessible panel with primary or most common actions on the screen."),(0,o.yg)(h,{src:s.A,component:i.A,mdxType:"InteractiveExample"}),(0,o.yg)("p",null,"We use ",(0,o.yg)("a",{parentName:"p",href:"/docs/fundamentals/glossary#shared-value"},"shared values")," to monitor if the button is expanded. The ",(0,o.yg)("inlineCode",{parentName:"p"},"useSharedValue")," hook helps prevent unnecessary re-renders during state changes."),(0,o.yg)(l.A,{src:s.A,showLines:[49,52],mdxType:"CollapsibleCode"}),(0,o.yg)("p",null,"The state is toggled when the main ",(0,o.yg)("em",{parentName:"p"},"Actions")," button is pressed, which triggers animations for other secondary buttons."),(0,o.yg)(g,{sources:{android:"/react-native-reanimated/recordings/examples/fab_android.mov",ios:"/react-native-reanimated/recordings/examples/fab_ios.mov"},mdxType:"ExampleVideo"}),(0,o.yg)("p",null,"It also relies on ",(0,o.yg)("a",{parentName:"p",href:"/docs/fundamentals/glossary#animatable-value"},"animatable values"),". Leveraging animatable values of rotation and position enables smooth transition between the two states."),(0,o.yg)("samp",{id:"FloatingActionButton"},"Floating Action Button"),(0,o.yg)(l.A,{src:s.A,showLines:[55,67],mdxType:"CollapsibleCode"}),(0,o.yg)("p",null,"The ",(0,o.yg)("strong",{parentName:"p"},"FloatingActionButton")," is a reusable component that manages button styles, content and animations. For this we use props: ",(0,o.yg)("inlineCode",{parentName:"p"},"buttonLetter"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"index")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"isExpanded"),"."),(0,o.yg)(l.A,{src:s.A,showLines:[21,46],mdxType:"CollapsibleCode"}),(0,o.yg)("p",null,'We define the animated styles for the buttons within the FloatingActionButton component, passing the necessary values as props. The delay in their appearance on the screen is calculated based on the button\'s index. Buttons with a higher index will appear later and be positioned higher in the "column" of buttons.'),(0,o.yg)("samp",{id:"FloatingActionButton"},"Floating Action Button"),(0,o.yg)(l.A,{src:s.A,showLines:[22,46],mdxType:"CollapsibleCode"}))}w.isMDXComponent=!0},20804:(e,t,n)=>{n.d(t,{A:()=>a});const a="import React from 'react';\nimport { StyleSheet, SafeAreaView, View, Pressable, Text } from 'react-native';\nimport Animated, {\n  withDelay,\n  interpolate,\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nconst SPRING_CONFIG = {\n  duration: 1200,\n  overshootClamping: true,\n  dampingRatio: 0.8,\n};\n\nconst OFFSET = 60;\n\nconst FloatingActionButton = ({ isExpanded, index, buttonLetter }) => {\n  const animatedStyles = useAnimatedStyle(() => {\n    // highlight-next-line\n    const moveValue = isExpanded.value ? OFFSET * index : 0;\n    const translateValue = withSpring(-moveValue, SPRING_CONFIG);\n    //highlight-next-line\n    const delay = index * 100;\n\n    const scaleValue = isExpanded.value ? 1 : 0;\n\n    return {\n      transform: [\n        { translateY: translateValue },\n        {\n          scale: withDelay(delay, withTiming(scaleValue)),\n        },\n      ],\n    };\n  });\n\n  return (\n    <AnimatedPressable style={[animatedStyles, styles.shadow, styles.button]}>\n      <Animated.Text style={styles.content}>{buttonLetter}</Animated.Text>\n    </AnimatedPressable>\n  );\n};\n\nexport default function App() {\n  const isExpanded = useSharedValue(false);\n\n  const handlePress = () => {\n    isExpanded.value = !isExpanded.value;\n  };\n\n  const plusIconStyle = useAnimatedStyle(() => {\n    // highlight-next-line\n    const moveValue = interpolate(Number(isExpanded.value), [0, 1], [0, 2]);\n    const translateValue = withTiming(moveValue);\n    const rotateValue = isExpanded.value ? '45deg' : '0deg';\n\n    return {\n      transform: [\n        { translateX: translateValue },\n        { rotate: withTiming(rotateValue) },\n      ],\n    };\n  });\n\n  return (\n    <SafeAreaView>\n      <View style={styles.mainContainer}>\n        <View style={styles.buttonContainer}>\n          <AnimatedPressable\n            onPress={handlePress}\n            style={[styles.shadow, mainButtonStyles.button]}>\n            <Animated.Text style={[plusIconStyle, mainButtonStyles.content]}>\n              +\n            </Animated.Text>\n          </AnimatedPressable>\n          <FloatingActionButton\n            isExpanded={isExpanded}\n            index={1}\n            buttonLetter={'M'}\n          />\n          <FloatingActionButton\n            isExpanded={isExpanded}\n            index={2}\n            buttonLetter={'W'}\n          />\n          <FloatingActionButton\n            isExpanded={isExpanded}\n            index={3}\n            buttonLetter={'S'}\n          />\n        </View>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst mainButtonStyles = StyleSheet.create({\n  button: {\n    zIndex: 1,\n    height: 56,\n    width: 56,\n    borderRadius: 100,\n    backgroundColor: '#b58df1',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  content: {\n    fontSize: 24,\n    color: '#f8f9ff',\n  },\n});\n\nconst styles = StyleSheet.create({\n  mainContainer: {\n    position: 'relative',\n    height: 260,\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  button: {\n    width: 40,\n    height: 40,\n    backgroundColor: '#82cab2',\n    position: 'absolute',\n    borderRadius: 100,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: -2,\n    flexDirection: 'row',\n  },\n  buttonContainer: {\n    position: 'absolute',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  shadow: {\n    shadowColor: '#171717',\n    shadowOffset: { width: -0.5, height: 3.5 },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n  },\n  content: {\n    color: '#f8f9ff',\n    fontWeight: 500,\n  },\n});\n"}}]);