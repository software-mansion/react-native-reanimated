"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[5446],{16979:(e,n,t)=>{t.d(n,{A:()=>c});var i=t(39471),o=t(8589),a=t(57038),r=t(90424),s=t(14442),l=t(19727),d=t(47671);function c(){const[e,n]=(0,i.useState)(!0),t=new l.Keyframe({0:{opacity:0,transform:[{translateY:50},{rotate:"820deg"},{skewX:"0deg"},{scale:0}]},50:{opacity:.5,transform:[{translateY:25},{rotate:"-180deg"},{skewX:"30deg"},{scale:.5}],easing:l.Easing.out(l.Easing.quad)},100:{opacity:1,transform:[{translateY:0},{rotate:"0deg"},{skewX:"0deg"},{scale:1}]}}).duration(1e3),s=new l.Keyframe({0:{opacity:1,transform:[{translateY:0},{rotateZ:"0deg"}]},10:{opacity:1,transform:[{translateY:25},{rotateZ:"0deg"}],easing:l.Easing.exp},50:{opacity:.5,transform:[{translateY:-100},{rotateZ:"60deg"}]},100:{opacity:0,transform:[{translateY:-300},{rotateZ:"120deg"}]}}).duration(1e3);return(0,d.jsxs)(o.A,{style:u.container,children:[e&&(0,d.jsx)(l.default.View,{entering:t,exiting:s,style:u.box,children:(0,d.jsx)(a.A,{onPress:()=>n(!e),style:u.button})}),(0,d.jsx)(r.A,{title:"Animate box",onPress:()=>n(!e)})]})}const u=s.A.create({container:{height:250,flex:1,justifyContent:"flex-end",alignItems:"center"},button:{height:"100%",width:"100%"},box:{width:100,height:100,backgroundColor:"#b58df1",borderRadius:24,justifyContent:"center",alignItems:"center",marginBottom:48}})},29070:(e,n,t)=>{t.d(n,{A:()=>i});const i="import React, { useState } from 'react';\nimport { View, Button, StyleSheet, Pressable } from 'react-native';\nimport Animated, { Keyframe, Easing } from 'react-native-reanimated';\n\nexport default function KeyframeExample() {\n  const [visible, setVisible] = useState(true);\n\n  const enteringAnimation = new Keyframe({\n    0: {\n      opacity: 0,\n      transform: [\n        { translateY: 50 },\n        { rotate: '820deg' },\n        { skewX: '0deg' },\n        { scale: 0 },\n      ],\n    },\n    50: {\n      opacity: 0.5,\n      transform: [\n        { translateY: 25 },\n        { rotate: '-180deg' },\n        { skewX: '30deg' },\n        { scale: 0.5 },\n      ],\n      easing: Easing.out(Easing.quad),\n    },\n    100: {\n      opacity: 1,\n      transform: [\n        { translateY: 0 },\n        { rotate: '0deg' },\n        { skewX: '0deg' },\n        { scale: 1 },\n      ],\n    },\n  }).duration(1000);\n\n  const exitingAnimation = new Keyframe({\n    0: {\n      opacity: 1,\n      transform: [{ translateY: 0 }, { rotateZ: '0deg' }],\n    },\n    10: {\n      opacity: 1,\n      transform: [{ translateY: 25 }, { rotateZ: '0deg' }],\n      easing: Easing.exp,\n    },\n    50: {\n      opacity: 0.5,\n      transform: [{ translateY: -100 }, { rotateZ: '60deg' }],\n    },\n    100: {\n      opacity: 0,\n      transform: [{ translateY: -300 }, { rotateZ: '120deg' }],\n    },\n  }).duration(1000);\n\n  return (\n    <View style={styles.container}>\n      {visible && (\n        <Animated.View\n          entering={enteringAnimation}\n          exiting={exitingAnimation}\n          style={styles.box}>\n          <Pressable\n            onPress={() => setVisible(!visible)}\n            style={styles.button}\n          />\n        </Animated.View>\n      )}\n      <Button title=\"Animate box\" onPress={() => setVisible(!visible)} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    height: 250,\n    flex: 1,\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  button: {\n    height: '100%',\n    width: '100%',\n  },\n  box: {\n    width: 100,\n    height: 100,\n    backgroundColor: '#b58df1',\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 48,\n  },\n});\n"},57038:(e,n,t)=>{t.d(n,{A:()=>te});var i=t(82195),o=t(21098),a=t(39471),r=t(42901),s=t(42805),l=()=>{};var d=function(){var e=!1;if(s.A)try{var n={};Object.defineProperty(n,"passive",{get:()=>(e=!0,!1)}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(t){}return e}();function c(){return this.cancelBubble}function u(){return this.defaultPrevented}function m(e,n,t,i){var o=function(e){return null!=e&&(d?e:Boolean(e.capture))}(i),a=e=>{return t(((n=e).nativeEvent=n,n.persist=l,n.isDefaultPrevented=u,n.isPropagationStopped=c,n));var n};return e.addEventListener(n,a,o),function(){null!=e&&e.removeEventListener(n,a,o)}}var f,h,y="keyboard",p="keyboard",v=!1,g=new Set,x="keyboard",b="mouse",j="touch",w="contextmenu",k="mousedown",P="mousemove",E="mouseup",A="pointerdown",K="pointermove",C="scroll",M="selectionchange",I="touchcancel",R="touchmove",S="touchstart",D={passive:!0},T={capture:!0,passive:!0};function L(){null==f&&null==h||(null!=f&&(p=f,f=null),null!=h&&(y=h,h=null),V())}function Y(e){var n=e.type;if("undefined"!=typeof window&&null!=window.PointerEvent){if(n===A)return void(y!==e.pointerType&&(p=e.pointerType,y=e.pointerType,V()));if(n===K)return void(p!==e.pointerType&&(p=e.pointerType,V()))}else{if(v||(n===k&&y!==b&&(p=b,y=b,V()),n===P&&p!==b&&(p=b,V())),n===S)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(y!==j&&(p=j,y=j,V()));n!==w&&n!==E&&n!==M&&n!==C&&n!==I&&n!==R||(v=!1)}}function V(){var e={activeModality:y,modality:p};g.forEach((n=>{n(e)}))}s.A&&(m(window,"blur",(function(){f=p,h=y,y=x,p=x,V(),v=!1}),D),m(window,"focus",(function(){L()}),D),m(document,"keydown",(function(e){e.metaKey||e.altKey||e.ctrlKey||p!==x&&(p=x,y=x,V())}),T),m(document,"visibilitychange",(function(){"hidden"!==document.visibilityState&&L()}),T),m(document,A,Y,T),m(document,K,Y,T),m(document,w,Y,T),m(document,k,Y,T),m(document,P,Y,T),m(document,E,Y,T),m(document,I,Y,T),m(document,R,Y,T),m(document,S,Y,T),m(document,M,Y,T),m(document,C,Y,T));var F=t(22562),O=t(79318);function H(e,n){var t=(0,O.A)((()=>new Map)),i=(0,O.A)((()=>(i,o)=>{var a=t.get(i);null!=a&&a(),null==o&&(t.delete(i),o=()=>{});var r=m(i,e,o,n);return t.set(i,r),r}));return(0,F.A)((()=>()=>{t.forEach((e=>{e()})),t.clear()}),[t]),i}var B={},N={passive:!0},Z="react-gui:hover:lock",_="react-gui:hover:unlock";function X(e,n,t){var i=document.createEvent("CustomEvent"),o=t||B,a=o.bubbles,r=void 0===a||a,s=o.cancelable,l=void 0===s||s,d=o.detail;i.initCustomEvent(n,r,l,d),e.dispatchEvent(i)}function q(e){var n=e.pointerType;return null!=n?n:p}function U(e,n){var t=n.contain,i=n.disabled,o=n.onHoverStart,a=n.onHoverChange,r=n.onHoverUpdate,s=n.onHoverEnd,l=!("undefined"==typeof window||null==window.PointerEvent),d=H(l?"pointermove":"mousemove",N),c=H(l?"pointerenter":"mouseenter",N),u=H(l?"pointerleave":"mouseleave",N),m=H(Z,N),f=H(_,N);(0,F.A)((()=>{var n=e.current;if(null!==n){var l=function(e){null!=s&&s(e),null!=a&&a(!1),d(n,null),u(n,null)},h=function(n){var i=e.current;null!=i&&"touch"!==q(n)&&(t&&X(i,_),l(n))},y=function(e){"touch"!==q(e)&&null!=r&&(null==e.x&&(e.x=e.clientX),null==e.y&&(e.y=e.clientY),r(e))},p=function(e){null!=o&&o(e),null!=a&&a(!0),null!=r&&d(n,i?null:y),u(n,i?null:h)};c(n,i?null:function(n){var o=e.current;if(null!=o&&"touch"!==q(n)){t&&X(o,Z),p(n);m(o,i?null:function(e){e.target!==o&&l(n)}),f(o,i?null:function(e){e.target!==o&&p(n)})}})}}),[c,d,u,m,f,t,i,o,a,r,s,e])}var J=t(94497),W=t(14442),$=t(8589),z=["children","delayLongPress","delayPressIn","delayPressOut","disabled","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","tabIndex","testOnly_hovered","testOnly_pressed"];function G(e,n){var t=e.children,s=e.delayLongPress,l=e.delayPressIn,d=e.delayPressOut,c=e.disabled,u=e.onBlur,m=e.onContextMenu,f=e.onFocus,h=e.onHoverIn,y=e.onHoverOut,p=e.onKeyDown,v=e.onLongPress,g=e.onPress,x=e.onPressMove,b=e.onPressIn,j=e.onPressOut,w=e.style,k=e.tabIndex,P=e.testOnly_hovered,E=e.testOnly_pressed,A=(0,o.A)(e,z),K=Q(!0===P),C=K[0],M=K[1],I=Q(!1),R=I[0],S=I[1],D=Q(!0===E),T=D[0],L=D[1],Y=(0,a.useRef)(null),V=(0,r.A)(n,Y),F=(0,a.useMemo)((()=>({delayLongPress:s,delayPressStart:l,delayPressEnd:d,disabled:c,onLongPress:v,onPress:g,onPressChange:L,onPressStart:b,onPressMove:x,onPressEnd:j})),[s,l,d,c,v,g,b,x,j,L]),O=(0,J.A)(Y,F),H=O.onContextMenu,B=O.onKeyDown;U(Y,{contain:!0,disabled:c,onHoverChange:M,onHoverStart:h,onHoverEnd:y});var N,Z={hovered:C,focused:R,pressed:T},_=a.useCallback((e=>{e.nativeEvent.target===Y.current&&(S(!1),null!=u&&u(e))}),[Y,S,u]),X=a.useCallback((e=>{e.nativeEvent.target===Y.current&&(S(!0),null!=f&&f(e))}),[Y,S,f]),q=a.useCallback((e=>{null!=H&&H(e),null!=m&&m(e)}),[m,H]),W=a.useCallback((e=>{null!=B&&B(e),null!=p&&p(e)}),[p,B]);return N=void 0!==k?k:c?-1:0,a.createElement($.A,(0,i.A)({},A,O,{"aria-disabled":c,onBlur:_,onContextMenu:q,onFocus:X,onKeyDown:W,ref:V,style:[c?ee.disabled:ee.active,"function"==typeof w?w(Z):w],tabIndex:N}),"function"==typeof t?t(Z):t)}function Q(e){var n=(0,a.useState)(!1);return[n[0]||e,n[1]]}var ee=W.A.create({active:{cursor:"pointer",touchAction:"manipulation"},disabled:{pointerEvents:"box-none"}}),ne=(0,a.memo)((0,a.forwardRef)(G));ne.displayName="Pressable";const te=ne},79285:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>f,frontMatter:()=>l,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"layout-animations/keyframe-animations","title":"Keyframe animations","description":"Keyframes are animation definition schemas that let you create complex animations. They allow you more flexibility than standard Entering and Exiting presets.","source":"@site/docs/layout-animations/keyframe-animations.mdx","sourceDirName":"layout-animations","slug":"/layout-animations/keyframe-animations","permalink":"/react-native-reanimated/docs/layout-animations/keyframe-animations","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/docs/layout-animations/keyframe-animations.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Entering/Exiting animations","permalink":"/react-native-reanimated/docs/layout-animations/entering-exiting-animations"},"next":{"title":"Layout transitions","permalink":"/react-native-reanimated/docs/layout-animations/layout-transitions"}}');var o=t(47671),a=t(30620),r=t(16979),s=t(29070);const l={sidebar_position:2},d="Keyframe animations",c={},u=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>definitions</code>",id:"definitions",level:4},{value:"Modifiers",id:"modifiers",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Example",id:"example",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:t,InteractiveExample:i,PlatformCompatibility:l}=n;return t||h("Details",!0),i||h("InteractiveExample",!0),l||h("PlatformCompatibility",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"keyframe-animations",children:"Keyframe animations"})}),"\n",(0,o.jsx)(n.p,{children:"Keyframes are animation definition schemas that let you create complex animations. They allow you more flexibility than standard Entering and Exiting presets."}),"\n",(0,o.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"import { Keyframe } from 'react-native-reanimated';\n\nconst keyframe = new Keyframe({\n  0: {\n    transform: [{ rotate: '0deg' }],\n  },\n  45: {\n    transform: [{ rotate: '100deg' }],\n    easing: Easing.exp,\n  },\n  100: {\n    transform: [{ rotate: '45deg' }],\n  },\n});\n\nfunction App() {\n  return <Animated.View entering={keyframe} />;\n}\n"})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Type definitions"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"type FirstFrame =\n  | {\n      0: KeyframeProps & { easing?: never };\n      from?: never;\n    }\n  | {\n      0?: never;\n      from: KeyframeProps & { easing?: never };\n    };\n\ntype LastFrame =\n  | { 100?: KeyframeProps; to?: never }\n  | { 100?: never; to: KeyframeProps };\n\nexport type ValidKeyframeProps = FirstFrame &\n  LastFrame &\n  Record<number, KeyframeProps>;\n\nclass Keyframe {\n  constructor(definitions: ValidKeyframeProps;\n  duration(durationMs: number): Keyframe;\n  delay(delayMs: number): Keyframe;\n  reduceMotion(reduceMotionV: ReduceMotion): Keyframe;\n  withCallback(callback: (finished: boolean) => void): Keyframe;\n}\n"})})]}),"\n",(0,o.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,o.jsx)(n.h4,{id:"definitions",children:(0,o.jsx)(n.code,{children:"definitions"})}),"\n",(0,o.jsxs)(n.p,{children:["An object, that contains definitions of your animation.\nThe object keys should be within range ",(0,o.jsx)(n.code,{children:"0-100"})," and correspond to animation progress.\nThe object values should consist of style props and optionally of an ",(0,o.jsx)(n.a,{href:"/docs/animations/withTiming/#easing",children:"easing function"}),". If easing property is not provided, it defaults to ",(0,o.jsx)(n.code,{children:"Easing.linear"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"The keys take the following values:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"0"})," or ",(0,o.jsx)(n.code,{children:"from"}),": Initial state of the object."]}),"\n",(0,o.jsxs)(n.li,{children:["Middle points (e.g., ",(0,o.jsx)(n.code,{children:"45"}),"): Intermediate states of the object."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"100"})," or ",(0,o.jsx)(n.code,{children:"to"}),": Final state of the object."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The key ",(0,o.jsx)(n.code,{children:"0"})," (or ",(0,o.jsx)(n.code,{children:"from"}),") should be assigned the style that you want for your object at the beginning of the animation. The key ",(0,o.jsx)(n.code,{children:"100"})," (or ",(0,o.jsx)(n.code,{children:"to"}),") should be assigned the style that you want for your object at the end of the animation."]}),"\n",(0,o.jsx)(n.h2,{id:"modifiers",children:"Modifiers"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"keyframe\n  .duration(1000)\n  .delay(500)\n  .reduceMotion(ReduceMotion.Never)\n  .withCallback((finished) => {\n    console.log(`finished without interruptions: ${finished}`);\n  });\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".duration(durationMs: number)"})," is the length of the animation (in milliseconds). Defaults to ",(0,o.jsx)(n.code,{children:"500"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".delay(durationMs: number)"})," is the delay before the animation starts (in milliseconds). Defaults to ",(0,o.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".reduceMotion(reduceMotion: ReduceMotion)"})," determines how the animation responds to the device's reduced motion accessibility setting."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".withCallback(callback: (finished: boolean) => void)"})," is the callback that will fire after the animation ends. Sets ",(0,o.jsx)(n.code,{children:"finished"})," to ",(0,o.jsx)(n.code,{children:"true"})," when animation ends without interruptions, and ",(0,o.jsx)(n.code,{children:"false"})," otherwise."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"remarks",children:"Remarks"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Providing keyframe ",(0,o.jsx)(n.code,{children:"0"})," or ",(0,o.jsx)(n.code,{children:"from"})," is required as it contains the initial state of the object you want to animate."]}),"\n",(0,o.jsx)(n.li,{children:"Ensure you provide the initial value for all style properties you want to animate in other keyframes."}),"\n",(0,o.jsxs)(n.li,{children:["If you want to add easing to an animation between two keyframes you have to pass it to the second one. As a result you should never provide any easing to keyframe ",(0,o.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Do not provide both ",(0,o.jsx)(n.code,{children:"0"})," and ",(0,o.jsx)(n.code,{children:"from"}),", or ",(0,o.jsx)(n.code,{children:"100"})," and ",(0,o.jsx)(n.code,{children:"to"})," keyframes, as it will result in a parsing conflict."]}),"\n",(0,o.jsx)(n.li,{children:"If you want to animate transform style, make sure that all properties in the transformation array are in the same order in all keyframes."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(i,{src:s.A,component:r.A}),"\n",(0,o.jsx)(n.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,o.jsx)(l,{android:!0,ios:!0,web:!0})]})}function f(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},90424:(e,n,t)=>{t.d(n,{A:()=>d});var i=t(39471),o=t(14442),a=t(21844),r=t(31071),s=i.forwardRef(((e,n)=>{var t=e.accessibilityLabel,o=e.color,s=e.disabled,d=e.onPress,c=e.testID,u=e.title;return i.createElement(a.A,{accessibilityLabel:t,accessibilityRole:"button",disabled:s,focusable:!s,onPress:d,ref:n,style:[l.button,o&&{backgroundColor:o},s&&l.buttonDisabled],testID:c},i.createElement(r.A,{style:[l.text,s&&l.textDisabled]},u))}));s.displayName="Button";var l=o.A.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const d=s}}]);