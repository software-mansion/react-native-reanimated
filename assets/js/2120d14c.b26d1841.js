"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[2360],{4402:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"core/useDerivedValue","title":"useDerivedValue","description":"useDerivedValue lets you create new shared values based on existing ones while keeping them reactive.","source":"@site/versioned_docs/version-3.x/core/useDerivedValue.mdx","sourceDirName":"core","slug":"/core/useDerivedValue","permalink":"/react-native-reanimated/docs/core/useDerivedValue","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/versioned_docs/version-3.x/core/useDerivedValue.mdx","tags":[],"version":"3.x","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"useAnimatedRef","permalink":"/react-native-reanimated/docs/core/useAnimatedRef"},"next":{"title":"createAnimatedComponent","permalink":"/react-native-reanimated/docs/core/createAnimatedComponent"}}');var r=t(74848),i=t(28453),s=t(61123),l=t(64304);const o={sidebar_position:5},d="useDerivedValue",c={},u=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>updater</code>",id:"updater",level:4},{value:"<code>dependencies</code> <Optional></Optional>",id:"dependencies-",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{Details:t,InteractiveExample:a,Optional:o,PlatformCompatibility:d}=n;return t||v("Details",!0),a||v("InteractiveExample",!0),o||v("Optional",!0),d||v("PlatformCompatibility",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"usederivedvalue",children:"useDerivedValue"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useDerivedValue"})," lets you create new ",(0,r.jsx)(n.a,{href:"/docs/fundamentals/glossary#shared-value",children:"shared values"})," based on existing ones while keeping them reactive."]}),"\n",(0,r.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { useDerivedValue } from 'react-native-reanimated';\n\nfunction App() {\n  const derivedValue = useDerivedValue(() => {\n    return sv.value * 50;\n  });\n}\n"})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Type definitions"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface SharedValue<Value = unknown> {\n  value: Value;\n  get(): Value;\n  set(value: Value | ((value: Value) => Value)): void;\n  addListener: (listenerID: number, listener: (value: Value) => void) => void;\n  removeListener: (listenerID: number) => void;\n  modify: (\n    modifier?: <T extends Value>(value: T) => T,\n    forceUpdate?: boolean\n  ) => void;\n}\n\ninterface DerivedValue<Value = unknown>\n  extends Readonly<Omit<SharedValue<Value>, 'set'>> {\n  /**\n   * @deprecated Derived values are readonly, don't use this method. It's here\n   *   only to prevent breaking changes in TypeScript types. It will be removed\n   *   in the future.\n   */\n  set: SharedValue<Value>['set'];\n}\n\nfunction useDerivedValue<T>(\n  updater: () => T,\n  dependencies?: DependencyList\n): DerivedValue<T>;\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsx)(n.h4,{id:"updater",children:(0,r.jsx)(n.code,{children:"updater"})}),"\n",(0,r.jsx)(n.p,{children:"A function that should return a value constructed of shared values, React state or any other JavaScript value. This function is called whenever at least one of the shared values or state used in the function body changes."}),"\n",(0,r.jsxs)(n.h4,{id:"dependencies-",children:[(0,r.jsx)(n.code,{children:"dependencies"})," ",(0,r.jsx)(o,{})]}),"\n",(0,r.jsx)(n.p,{children:"An optional array of dependencies."}),"\n",(0,r.jsxs)(n.p,{children:["Only relevant when using Reanimated ",(0,r.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/guides/web-support#web-without-the-babel-plugin",children:"without the Babel plugin on the Web"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useDerivedValue"})," returns a new readonly ",(0,r.jsx)(n.a,{href:"/docs/fundamentals/glossary#shared-value",children:"shared value"})," based on a value returned from the ",(0,r.jsx)(n.a,{href:"/docs/core/useDerivedValue#updater",children:(0,r.jsx)(n.code,{children:"updater"})})," function."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n","\n",(0,r.jsx)(a,{src:l.A,component:s.A}),"\n",(0,r.jsx)(n.h2,{id:"remarks",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The callback passed to the first argument is automatically ",(0,r.jsx)(n.a,{href:"/docs/fundamentals/glossary#to-workletize",children:"workletized"})," and ran on the ",(0,r.jsx)(n.a,{href:"/docs/fundamentals/glossary#ui-thread",children:"UI thread"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can also use ",(0,r.jsx)(n.code,{children:"useDerivedValue"})," without returning a value in the ",(0,r.jsx)(n.code,{children:"updater"})," function to react to a change of a shared value. If you need to access the previous value stored in a shared value use ",(0,r.jsx)(n.a,{href:"/docs/advanced/useAnimatedReaction",children:(0,r.jsx)(n.code,{children:"useAnimatedReaction"})})," instead."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,r.jsx)(d,{android:!0,ios:!0,web:!0})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function v(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(96540);const r={},i=a.createContext(r);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:n},e.children)}},61123:(e,n,t)=>{t.d(n,{A:()=>u});var a=t(96540),r=t(9176),i=t(72188),s=t(55535),l=t(74848);const o={code:'function DerivedValueTsx1(){const{scale}=this.__closure;return scale.value*2+"rad";}'},d={code:"function DerivedValueTsx2(){const{scale}=this.__closure;return{transform:[{scale:scale.value}]};}"},c={code:"function DerivedValueTsx3(){const{rotate}=this.__closure;return{transform:[{rotate:rotate.value}]};}"};function u(){const e=(0,s.useSharedValue)(1),n=(0,s.useDerivedValue)(function(){const n=function(){return 2*e.value+"rad"};return n.__closure={scale:e},n.__workletHash=0xa2bb7d4c326,n.__initData=o,n}()),t=(0,s.useAnimatedStyle)(function(){const n=()=>({transform:[{scale:e.value}]});return n.__closure={scale:e},n.__workletHash=7546824800755,n.__initData=d,n}()),i=(0,s.useAnimatedStyle)(function(){const e=()=>({transform:[{rotate:n.value}]});return e.__closure={rotate:n},e.__workletHash=0xa202840e833,e.__initData=c,e}());return a.useEffect((()=>{e.value=(0,s.withRepeat)((0,s.withTiming)(2*e.value,{duration:1e3}),-1,!0)}),[]),(0,l.jsxs)(r.A,{style:h.container,children:[(0,l.jsx)(s.default.View,{style:[h.ball,t]}),(0,l.jsx)(s.default.View,{style:[h.box,i]})]})}const h=i.A.create({container:{flex:1,alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"row"},ball:{height:50,width:50,backgroundColor:"#b58df1",borderRadius:50,marginRight:80},box:{height:100,width:100,backgroundColor:"#b58df1",borderRadius:15}})},64304:(e,n,t)=>{t.d(n,{A:()=>a});const a="import React from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withTiming,\n  withRepeat,\n  useDerivedValue,\n} from 'react-native-reanimated';\n\nexport default function App() {\n  const scale = useSharedValue<number>(1);\n\n  // highlight-start\n  const rotate = useDerivedValue(() => {\n    return `${scale.value * 2}rad`;\n  });\n  // highlight-end\n\n  const scaleStyles = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const rotateStyles = useAnimatedStyle(() => ({\n    transform: [{ rotate: rotate.value }],\n  }));\n\n  React.useEffect(() => {\n    scale.value = withRepeat(\n      withTiming(scale.value * 2, { duration: 1000 }),\n      -1,\n      true\n    );\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <Animated.View style={[styles.ball, scaleStyles]} />\n      <Animated.View style={[styles.box, rotateStyles]} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n    flexDirection: 'row',\n  },\n  ball: {\n    height: 50,\n    width: 50,\n    backgroundColor: '#b58df1',\n    borderRadius: 50,\n    marginRight: 80,\n  },\n  box: {\n    height: 100,\n    width: 100,\n    backgroundColor: '#b58df1',\n    borderRadius: 15,\n  },\n});\n"}}]);