"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[4147],{7452:(e,n,t)=>{t.d(n,{A:()=>v});var o=t(19727),r=t(14442),a=t(90441),l=t(28313),s=t(8589),i=t(18202),d=t(47671);const c=o.default.createAnimatedComponent(l.A),u={code:"function UseHandlerEventExampleTsx1(event){const{offsetY}=this.__closure;offsetY.value=event.contentOffset.y;}"},h={code:"function UseHandlerEventExampleTsx2(event){const{handlers}=this.__closure;const{onScroll:onScroll}=handlers;if(onScroll){onScroll(event);}}"},f={code:'function UseHandlerEventExampleTsx3(){const{offsetY}=this.__closure;return{text:"Scroll offset: "+Math.round(offsetY.value)+"px",defaultValue:"Scroll offset: "+offsetY.value+"px"};}'};const v=function(){const e=(0,i.A)(),n=(0,o.useSharedValue)(0),t={onScroll:function({_worklet_10009032391441_init_data:e,offsetY:n}){const t=function(e){n.value=e.contentOffset.y};return t.__closure={offsetY:n},t.__workletHash=0x91a68d1fb11,t.__initData=e,t}({_worklet_10009032391441_init_data:u,offsetY:n})},{context:r,doDependenciesDiffer:l}=(0,o.useHandler)(t),v=(0,o.useEvent)(function({_worklet_10529362398689_init_data:e,handlers:n}){const t=function(e){const{onScroll:t}=n;t&&t(e)};return t.__closure={handlers:n},t.__workletHash=0x9938ee7cde1,t.__initData=e,t}({_worklet_10529362398689_init_data:h,handlers:t}),["onScroll"],l),m=(0,o.useAnimatedProps)(function({_worklet_2714082481794_init_data:e,offsetY:n}){const t=function(){return{text:`Scroll offset: ${Math.round(n.value)}px`,defaultValue:`Scroll offset: ${n.value}px`}};return t.__closure={offsetY:n},t.__workletHash=2714082481794,t.__initData=e,t}({_worklet_2714082481794_init_data:f,offsetY:n})),x=["#fa7f7c","#b58df1","#ffe780","#82cab2","#87cce8"].map((e,n)=>(0,d.jsx)(s.A,{style:[p.section,{backgroundColor:e}]},n));return(0,d.jsxs)(a.A,{style:p.container,children:[(0,d.jsx)(c,{animatedProps:m,editable:!1,style:[p.header,e]}),(0,d.jsx)(o.default.ScrollView,{onScroll:v,children:(0,d.jsx)(s.A,{style:p.container,children:x})})]})},p=r.A.create({container:{paddingHorizontal:32,height:350},header:{paddingVertical:16,paddingHorizontal:32,textAlign:"center",fontFamily:"Aeonik",marginTop:"-1px"},section:{height:150,borderRadius:20,marginVertical:10,marginHorizontal:20}})},10068:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>f,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"advanced/useEvent","title":"useEvent","description":"useEvent is a low-level hook. It returns event handler that will be called when native event occurs. You can use it to create custom event handler hooks, like useScrollViewOffset or useAnimatedScrollHandler.","source":"@site/versioned_docs/version-3.x/advanced/useEvent.mdx","sourceDirName":"advanced","slug":"/advanced/useEvent","permalink":"/react-native-reanimated/docs/3.x/advanced/useEvent","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/docs-reanimated/versioned_docs/version-3.x/advanced/useEvent.mdx","tags":[],"version":"3.x","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"useFrameCallback","permalink":"/react-native-reanimated/docs/3.x/advanced/useFrameCallback"},"next":{"title":"useHandler","permalink":"/react-native-reanimated/docs/3.x/advanced/useHandler"}}');var r=t(47671),a=t(30620),l=t(7452),s=t(88907);const i={sidebar_position:4},d="useEvent",c={},u=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>handler</code>",id:"handler",level:4},{value:"<code>eventNames</code> <Optional></Optional>",id:"eventnames-",level:4},{value:"<code>rebuild</code> <Optional></Optional>",id:"rebuild-",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:t,InteractiveExample:o,Optional:i,PlatformCompatibility:d}=n;return t||v("Details",!0),o||v("InteractiveExample",!0),i||v("Optional",!0),d||v("PlatformCompatibility",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"useevent",children:"useEvent"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useEvent"})," is a low-level hook. It returns event handler that will be called when native event occurs. You can use it to create custom event handler hooks, like ",(0,r.jsx)(n.a,{href:"/docs/3.x/scroll/useScrollViewOffset/",children:(0,r.jsx)(n.code,{children:"useScrollViewOffset"})})," or ",(0,r.jsx)(n.a,{href:"/docs/3.x/scroll/useAnimatedScrollHandler/",children:(0,r.jsx)(n.code,{children:"useAnimatedScrollHandler"})}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { useEvent } from 'react-native-reanimated';\n\nfunction useAnimatedPagerScrollHandler(handlers, dependencies) {\n  const { context, doDependenciesDiffer } = useHandler(handlers, dependencies);\n\n  // highlight-start\n  return useEvent(\n    (event) => {\n      'worklet';\n      const { onPageScroll } = handlers;\n\n      if (onPageScroll && event.eventName.endsWith('onPageScroll')) {\n        onPageScroll(event, context);\n      }\n    },\n    ['onPageScroll'],\n    doDependenciesDiffer\n  );\n}\n// highlight-end\n\nreturn <Animated.View onScroll={useAnimatedPagerScrollHandler} />;\n"})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Type definitions"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function useEvent<\n  Event extends object,\n  Context extends Record<string, unknown> = never\n>(\n  handler: EventHandler<Event, Context>,\n  eventNames?: string[],\n  rebuild?: boolean\n): EventHandlerProcessed<Event, Context>;\n\ntype EventHandler<\n  Event extends object,\n  Context extends Record<string, unknown> = never\n> = (event: ReanimatedEvent<Event>, context?: Context) => void;\n\ntype EventHandlerProcessed<\n  Event extends object,\n  Context extends Record<string, unknown> = never\n> = (event: Event, context?: Context) => void;\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsx)(n.h4,{id:"handler",children:(0,r.jsx)(n.code,{children:"handler"})}),"\n",(0,r.jsx)(n.p,{children:"Function that receives event object with native payload, that can be passed to custom handler hook's worklets."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," - event object.\nThe payload can differ depending on the type of the event."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"eventnames-",children:[(0,r.jsx)(n.code,{children:"eventNames"})," ",(0,r.jsx)(i,{})]}),"\n",(0,r.jsx)(n.p,{children:"Array of event names that will be handled by handler."}),"\n",(0,r.jsxs)(n.h4,{id:"rebuild-",children:[(0,r.jsx)(n.code,{children:"rebuild"})," ",(0,r.jsx)(i,{})]}),"\n",(0,r.jsx)(n.p,{children:"Value indicating whether handler should be rebuilt."}),"\n",(0,r.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:"The hook returns event handler that will be invoked when native event is dispatched. That handler may be connected to multiple components and will be invoked for each one's specific events."}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n","\n",(0,r.jsx)(o,{src:s.A,component:l.A}),"\n",(0,r.jsxs)(n.p,{children:["This example can be more easily implemented using ",(0,r.jsx)(n.a,{href:"/docs/3.x/scroll/useScrollViewOffset/",children:(0,r.jsx)(n.code,{children:"useScrollViewOffset"})}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"remarks",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Keep in mind that not all scroll events are supported on the web, only ",(0,r.jsx)(n.code,{children:"onScroll"})," is available across browsers."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,r.jsx)(d,{android:!0,ios:!0,web:!0})]})}function f(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function v(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},18202:(e,n,t)=>{t.d(n,{A:()=>a});var o=t(10287),r=t(14442);const a=()=>{const{colorMode:e}=(0,o.G)();return"light"===e?l.darkText:l.lightText},l=r.A.create({lightText:{color:"var(--swm-off-white)"},darkText:{color:"var(--swm-navy-light-100)"}})},30620:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var o=t(39471);const r={},a=o.createContext(r);function l(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(a.Provider,{value:n},e.children)}},88907:(e,n,t)=>{t.d(n,{A:()=>o});const o="import React, { useEffect } from 'react';\nimport Animated, {\n  useHandler,\n  useEvent,\n  useSharedValue,\n  useAnimatedProps,\n  type ScrollEvent,\n} from 'react-native-reanimated';\nimport { TextInput, SafeAreaView, View, StyleSheet } from 'react-native';\nimport useThemedTextStyle from '@site/src/hooks/useThemedTextStyle';\n\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n\nfunction UseHandlerExample() {\n  const textColor = useThemedTextStyle();\n  const offsetY = useSharedValue(0);\n\n  const handlers = {\n    onScroll: (event: ScrollEvent) => {\n      'worklet';\n      offsetY.value = event.contentOffset.y;\n    },\n  };\n\n  const { context, doDependenciesDiffer } = useHandler(handlers);\n\n  const scrollHandler = useEvent(\n    (event: ScrollEvent) => {\n      'worklet';\n      const { onScroll } = handlers;\n      if (onScroll) {\n        onScroll(event);\n      }\n    },\n    ['onScroll'],\n    doDependenciesDiffer\n  );\n\n  const animatedProps = useAnimatedProps(() => {\n    return {\n      text: `Scroll offset: ${Math.round(offsetY.value)}px`,\n      defaultValue: `Scroll offset: ${offsetY.value}px`,\n    };\n  });\n\n  const BRAND_COLORS = ['#fa7f7c', '#b58df1', '#ffe780', '#82cab2', '#87cce8'];\n\n  const content = BRAND_COLORS.map((color, index) => (\n    <View\n      key={index}\n      style={[\n        styles.section,\n        {\n          backgroundColor: color,\n        },\n      ]}\n    />\n  ));\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <AnimatedTextInput\n        animatedProps={animatedProps}\n        editable={false}\n        style={[styles.header, textColor]}\n      />\n      <Animated.ScrollView onScroll={scrollHandler}>\n        <View style={styles.container}>{content}</View>\n      </Animated.ScrollView>\n    </SafeAreaView>\n  );\n}\n\nexport default UseHandlerExample;\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingHorizontal: 32,\n    height: 350,\n  },\n  header: {\n    paddingVertical: 16,\n    paddingHorizontal: 32,\n    textAlign: 'center',\n    fontFamily: 'Aeonik',\n    marginTop: '-1px',\n  },\n  section: {\n    height: 150,\n    borderRadius: 20,\n    marginVertical: 10,\n    marginHorizontal: 20,\n  },\n});\n"},90441:(e,n,t)=>{t.d(n,{A:()=>f});var o=t(82195),r=t(21098),a=t(39471),l=t(14442),s=t(8589),i=t(42805),d=["style"],c=i.A&&window.CSS&&window.CSS.supports&&window.CSS.supports("top: constant(safe-area-inset-top)")?"constant":"env",u=a.forwardRef((e,n)=>{var t=e.style,l=(0,r.A)(e,d);return a.createElement(s.A,(0,o.A)({},l,{ref:n,style:[h.root,t]}))});u.displayName="SafeAreaView";var h=l.A.create({root:{paddingTop:c+"(safe-area-inset-top)",paddingRight:c+"(safe-area-inset-right)",paddingBottom:c+"(safe-area-inset-bottom)",paddingLeft:c+"(safe-area-inset-left)"}});const f=u}}]);