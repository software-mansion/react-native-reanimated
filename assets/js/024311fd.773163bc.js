"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[9666],{30620:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var a=i(39471);const t={},s=a.createContext(t);function r(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(s.Provider,{value:n},e.children)}},77684:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"guides/troubleshooting","title":"Troubleshooting","description":"Initialization issues","source":"@site/docs/guides/troubleshooting.mdx","sourceDirName":"guides","slug":"/guides/troubleshooting","permalink":"/react-native-reanimated/docs/guides/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/docs-reanimated/docs/guides/troubleshooting.mdx","tags":[],"version":"current","frontMatter":{"id":"troubleshooting","title":"Troubleshooting","sidebar_label":"Troubleshooting"},"sidebar":"tutorialSidebar","previous":{"title":"Testing with Jest","permalink":"/react-native-reanimated/docs/guides/testing"},"next":{"title":"Web Support","permalink":"/react-native-reanimated/docs/guides/web-support"}}');var t=i(47671),s=i(30620);const r={id:"troubleshooting",title:"Troubleshooting",sidebar_label:"Troubleshooting"},o="Troubleshooting",d={},l=[{value:"Initialization issues",id:"initialization-issues",level:2},{value:"Failed to create a worklet",id:"failed-to-create-a-worklet",level:3},{value:"Native part of Reanimated doesn&#39;t seem to be initialized",id:"native-part-of-reanimated-doesnt-seem-to-be-initialized",level:3},{value:"Using dev bundle in a release app build is not supported",id:"using-dev-bundle-in-a-release-app-build-is-not-supported",level:3},{value:"Couldn&#39;t determine the version of the native part of Reanimated",id:"couldnt-determine-the-version-of-the-native-part-of-reanimated",level:3},{value:"Mismatch between JavaScript part and native part of Reanimated",id:"mismatch-between-javascript-part-and-native-part-of-reanimated",level:3},{value:"C++ side failed to resolve JavaScript code version",id:"c-side-failed-to-resolve-javascript-code-version",level:3},{value:"Mismatch between C++ code version and JavaScript code version",id:"mismatch-between-c-code-version-and-javascript-code-version",level:3},{value:"C++ side failed to resolve Java code version",id:"c-side-failed-to-resolve-java-code-version",level:3},{value:"Mismatch between C++ code version and Java code version",id:"mismatch-between-c-code-version-and-java-code-version",level:3},{value:"Java side failed to resolve C++ code version",id:"java-side-failed-to-resolve-c-code-version",level:3},{value:"Mismatch between Java code version and C++ code version",id:"mismatch-between-java-code-version-and-c-code-version",level:3},{value:"Multiple versions of Reanimated were detected",id:"multiple-versions-of-reanimated-were-detected",level:3},{value:"Another instance of Reanimated was detected",id:"another-instance-of-reanimated-was-detected",level:3},{value:"Outdated version of React Native for New Architecture",id:"outdated-version-of-react-native-for-new-architecture",level:3},{value:"Warnings",id:"warnings",level:2},{value:"Reduced motion setting is enabled on this device.",id:"reduced-motion-setting-is-enabled-on-this-device",level:3},{value:"Dependency issues",id:"dependency-issues",level:2},{value:"Unable to find a specification for RNWorklets depended upon by RNReanimated",id:"unable-to-find-a-specification-for-rnworklets-depended-upon-by-rnreanimated",level:3},{value:"Unable to resolve module react-native-worklets",id:"unable-to-resolve-module-react-native-worklets",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,t.jsx)(n.h2,{id:"initialization-issues",children:"Initialization issues"}),"\n",(0,t.jsx)(n.p,{children:"Reanimated has four core components that compose its code:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"C++,"}),"\n",(0,t.jsx)(n.li,{children:"Java,"}),"\n",(0,t.jsx)(n.li,{children:"JavaScript,"}),"\n",(0,t.jsx)(n.li,{children:"Reanimated Babel plugin."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["All of them are supposed to work correctly only within the same minor version. Therefore, having any of those pieces in your code - directly or indirectly - separate from ",(0,t.jsx)(n.code,{children:"react-native-reanimated"}),", especially having any code transpiled with a different version of the aforementioned plugin will result in undefined behavior and errors."]}),"\n",(0,t.jsx)(n.h3,{id:"failed-to-create-a-worklet",children:"Failed to create a worklet"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This usually happens when Reanimated is not properly installed, e.g. forgetting to include the Reanimated Babel plugin in ",(0,t.jsx)(n.code,{children:"babel.config.js"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," See installation docs at ",(0,t.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/getting-started/#step-2-add-reanimateds-babel-plugin",children:"https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/getting-started/#step-2-add-reanimateds-babel-plugin"})," for more information."]}),"\n",(0,t.jsx)(n.h3,{id:"native-part-of-reanimated-doesnt-seem-to-be-initialized",children:"Native part of Reanimated doesn't seem to be initialized"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This issue happens when Reanimated fails to initialize its native side from JavaScript."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"If you recently installed or upgraded Reanimated, make sure to rebuild your app."}),"\n",(0,t.jsxs)(n.li,{children:["Check if your platform is supported by Reanimated. Currently we support:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Android"}),"\n",(0,t.jsx)(n.li,{children:"iOS"}),"\n",(0,t.jsx)(n.li,{children:"macOS"}),"\n",(0,t.jsx)(n.li,{children:"tvOS"}),"\n",(0,t.jsx)(n.li,{children:"visionOS"}),"\n",(0,t.jsx)(n.li,{children:"Web"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"If you are using Reanimated in a brownfield app, make sure to initialize the native library manually."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"using-dev-bundle-in-a-release-app-build-is-not-supported",children:"Using dev bundle in a release app build is not supported"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when you use a release build of your app with a development JavaScript bundle."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," See this ",(0,t.jsx)(n.a,{href:"https://github.com/software-mansion/react-native-reanimated/issues/4737",children:"post"})," for more information."]}),"\n",(0,t.jsx)(n.h3,{id:"couldnt-determine-the-version-of-the-native-part-of-reanimated",children:"Couldn't determine the version of the native part of Reanimated"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated fails to determine the version of its native part."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Check if you have rebuilt your app after upgrading ",(0,t.jsx)(n.code,{children:"react-native-reanimated"}),". If you use Expo Go, you must use the exact version which is bundled into Expo SDK."]}),"\n",(0,t.jsx)(n.h3,{id:"mismatch-between-javascript-part-and-native-part-of-reanimated",children:"Mismatch between JavaScript part and native part of Reanimated"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated has different versions of its JavaScript and native parts."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Check if you have rebuilt your app after upgrading ",(0,t.jsx)(n.code,{children:"react-native-reanimated"}),". If you use Expo Go, you must use the exact version which is bundled into Expo SDK."]}),"\n",(0,t.jsx)(n.h3,{id:"c-side-failed-to-resolve-javascript-code-version",children:"C++ side failed to resolve JavaScript code version"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#couldnt-determine-the-version-of-the-native-part-of-reanimated",children:"Couldn't determine the version of the native part of Reanimated"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"mismatch-between-c-code-version-and-javascript-code-version",children:"Mismatch between C++ code version and JavaScript code version"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#mismatch-between-javascript-part-and-native-part-of-reanimated",children:"Mismatch between JavaScript part and native part of Reanimated"})," and ",(0,t.jsx)(n.a,{href:"#mismatch-between-javascript-code-version-and-reanimated-babel-plugin-version",children:"Mismatch between JavaScript code version and Reanimated Babel plugin version"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"c-side-failed-to-resolve-java-code-version",children:"C++ side failed to resolve Java code version"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated fails to determine the version of its Java part - most likely because Java part hasn't rebuilt after an upgrade."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Make sure to rebuild your app and see if the problem persists. If it does, feel free to ",(0,t.jsx)(n.a,{href:"https://github.com/software-mansion/react-native-reanimated/",children:"create an issue on our GitHub"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"mismatch-between-c-code-version-and-java-code-version",children:"Mismatch between C++ code version and Java code version"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated has different versions of its C++ and Java parts."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," See ",(0,t.jsx)(n.a,{href:"#c-side-failed-to-resolve-javas-code-version",children:"Native side failed to resolve Java code version"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"java-side-failed-to-resolve-c-code-version",children:"Java side failed to resolve C++ code version"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated fails to determine the version of its C++ part - most likely because for some reason C++ part hasn't rebuilt after an upgrade."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," See ",(0,t.jsx)(n.a,{href:"#c-side-failed-to-resolve-java-code-version",children:"Native side failed to resolve Java code version"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"mismatch-between-java-code-version-and-c-code-version",children:"Mismatch between Java code version and C++ code version"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when Reanimated has different versions of its Java and C++ parts."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," See ",(0,t.jsx)(n.a,{href:"#c-side-failed-to-resolve-java-code-version",children:"Native side failed to resolve Java code version"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"multiple-versions-of-reanimated-were-detected",children:"Multiple versions of Reanimated were detected"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This error usually happens when in your project exists more than one instance of Reanimated. It can occur when some of your dependency has installed Reanimated inside their own ",(0,t.jsx)(n.code,{children:"node_modules"})," instead of using it as a peer dependency. In this case two different versions of Reanimated JavaScript module might try to initialize its native part. You can check which libraries are using Reanimated e.g. with ",(0,t.jsx)(n.code,{children:"yarn why react-native-reanimated"})," or ",(0,t.jsx)(n.code,{children:"npm ls react-native-reanimated"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Modify your ",(0,t.jsx)(n.code,{children:"package.json"})," file accordingly:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["if you use ",(0,t.jsx)(n.code,{children:"yarn"}),", you should add ",(0,t.jsxs)(n.a,{href:"https://classic.yarnpkg.com/lang/en/docs/selective-version-resolutions/",children:[(0,t.jsx)(n.code,{children:"resolution"})," property"]}),":"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"resolutions": {\n  "react-native-reanimated": <Reanimated version>\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["if you use ",(0,t.jsx)(n.code,{children:"npm"}),", you should add ",(0,t.jsxs)(n.a,{href:"https://docs.npmjs.com/cli/v7/configuring-npm/package-json#overrides",children:[(0,t.jsx)(n.code,{children:"overrides"})," property"]}),":"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"overrides": {\n  "react-native-reanimated": <Reanimated version>\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["After that make sure to run your package manager again, either ",(0,t.jsx)(n.code,{children:"yarn"})," or ",(0,t.jsx)(n.code,{children:"npm install"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"another-instance-of-reanimated-was-detected",children:"Another instance of Reanimated was detected"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#multiple-versions-of-reanimated-were-detected",children:"Multiple versions of Reanimated were detected"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"outdated-version-of-react-native-for-new-architecture",children:"Outdated version of React Native for New Architecture"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," Reanimated supports New Architecture (Fabric) only on the latest minor release of React Native."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Please upgrade to a newer version of React Native or downgrade to an older version of Reanimated.\nSee ",(0,t.jsx)(n.a,{href:"/docs/guides/compatibility",children:"the compatibility table"})," for a full list of supported versions of React Native."]}),"\n",(0,t.jsx)(n.h2,{id:"warnings",children:"Warnings"}),"\n",(0,t.jsx)(n.h3,{id:"reduced-motion-setting-is-enabled-on-this-device",children:"Reduced motion setting is enabled on this device."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This warning is displayed to avoid confusion that could arise when Reduced motion is enabled."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Do nothing, this warning is safe to ignore as it is only displayed in development mode to avoid confusion. If you wish to disable it, you can add the following line to your project's root file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"LogBox.ignoreLogs([\n  '[Reanimated] Reduced motion setting is enabled on this device.',\n]);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"accessibility",children:"the accessibility overview"})," to learn more about Reduced Motion."]}),"\n",(0,t.jsx)(n.h2,{id:"dependency-issues",children:"Dependency issues"}),"\n",(0,t.jsx)(n.h3,{id:"unable-to-find-a-specification-for-rnworklets-depended-upon-by-rnreanimated",children:"Unable to find a specification for RNWorklets depended upon by RNReanimated"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when you have installed Reanimated 4 but don't have ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," installed as a dependency."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Platform:"})," iOS"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Install ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," with your package manager, i.e. ",(0,t.jsx)(n.code,{children:"yarn add react-native-worklets"})," or ",(0,t.jsx)(n.code,{children:"npm i react-native-worklets"}),". Make sure to install a ",(0,t.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/guides/compatibility",children:"compatible version"})," of ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," for your Reanimated version."]}),"\n",(0,t.jsx)(n.h3,{id:"unable-to-resolve-module-react-native-worklets",children:"Unable to resolve module react-native-worklets"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," This happens when you have installed Reanimated 4 but don't have ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," installed as a dependency."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Platform:"})," Web"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Install ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," with your package manager, i.e. ",(0,t.jsx)(n.code,{children:"yarn add react-native-worklets"})," or ",(0,t.jsx)(n.code,{children:"npm i react-native-worklets"}),". Make sure to install a ",(0,t.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/guides/compatibility",children:"compatible version"})," of ",(0,t.jsx)(n.code,{children:"react-native-worklets"})," for your Reanimated version."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);