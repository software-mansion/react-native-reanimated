"use strict";var Qe=Object.create;var be=Object.defineProperty;var et=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,rt=Object.prototype.hasOwnProperty;var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var it=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of tt(t))!rt.call(e,i)&&i!==n&&be(e,i,{get:()=>t[i],enumerable:!(r=et(t,i))||r.enumerable});return e};var R=(e,t,n)=>(n=e!=null?Qe(nt(e)):{},it(t||!e||!e.__esModule?be(n,"default",{value:e,enumerable:!0}):n,e));var S=b(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.workletClassFactorySuffix=y.isWorkletizableObjectNode=y.isWorkletizableObjectPath=y.isWorkletizableFunctionNode=y.isWorkletizableFunctionPath=y.WorkletizableObject=y.WorkletizableFunction=void 0;var U=require("@babel/types");y.WorkletizableFunction="FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod";y.WorkletizableObject="ObjectExpression";function ot(e){return e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()||e.isObjectMethod()}y.isWorkletizableFunctionPath=ot;function st(e){return(0,U.isFunctionDeclaration)(e)||(0,U.isFunctionExpression)(e)||(0,U.isArrowFunctionExpression)(e)||(0,U.isObjectMethod)(e)}y.isWorkletizableFunctionNode=st;function at(e){return e.isObjectExpression()}y.isWorkletizableObjectPath=at;function lt(e){return(0,U.isObjectExpression)(e)}y.isWorkletizableObjectNode=lt;y.workletClassFactorySuffix="__classFactory"});var M=b(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.replaceWithFactoryCall=A.isRelease=void 0;var B=require("@babel/types");function ct(){var e,t;let n=/(prod|release|stag[ei])/i;return!!(!((e=process.env.BABEL_ENV)===null||e===void 0)&&e.match(n)||!((t=process.env.NODE_ENV)===null||t===void 0)&&t.match(n))}A.isRelease=ct;function ut(e,t,n){if(!t||!dt(e))e.replaceWith(n);else{let r=(0,B.variableDeclaration)("const",[(0,B.variableDeclarator)((0,B.identifier)(t),n)]);e.replaceWith(r)}}A.replaceWithFactoryCall=ut;function dt(e){return(0,B.isScopable)(e.parent)||(0,B.isExportNamedDeclaration)(e.parent)}});var oe=b(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.addCustomGlobals=g.initializeGlobals=g.globals=g.defaultGlobals=g.initializeState=void 0;var ft=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","Object","Function","Boolean","Symbol","Error","AggregateError","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","InternalError","Number","BigInt","Math","Date","String","RegExp","Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","BigInt64Array","BigUint64Array","Float32Array","Float64Array","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Atomics","JSON","WeakRef","FinalizationRegistry","Iterator","AsyncIterator","Promise","GeneratorFunction","AsyncGeneratorFunction","Generator","AsyncGenerator","AsyncFunction","Reflect","Proxy","Intl","null","this","global","window","globalThis","console","performance","queueMicrotask","requestAnimationFrame","setImmediate","arguments","HermesInternal","_WORKLET","ReanimatedError","__reanimatedLoggerConfig"],pt=["_IS_FABRIC","_log","_toString","_scheduleHostFunctionOnJS","_scheduleRemoteFunctionOnJS","_scheduleOnRuntime","_makeShareableClone","_updatePropsPaper","_updatePropsFabric","_removeFromPropsRegistry","_measurePaper","_measureFabric","_scrollToPaper","_dispatchCommandPaper","_dispatchCommandFabric","_setGestureState","_notifyAboutProgress","_notifyAboutEnd","_runOnUIQueue","_getAnimationTimestamp"];function bt(e){e.workletNumber=1,e.classesToWorkletize=[],me(),ye(e)}g.initializeState=bt;g.defaultGlobals=new Set(ft.concat(pt));function me(){g.globals=new Set(g.defaultGlobals)}g.initializeGlobals=me;function ye(e){e.opts&&Array.isArray(e.opts.globals)&&e.opts.globals.forEach(t=>{g.globals.add(t)})}g.addCustomGlobals=ye});var ge=b(O=>{"use strict";var mt=O&&O.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),yt=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ke=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&mt(t,e,n);return yt(t,e),t},kt=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});O.buildWorkletString=void 0;var se=require("@babel/core"),gt=kt(require("@babel/generator")),c=require("@babel/types"),G=require("assert"),_t=ke(require("convert-source-map")),vt=ke(require("fs")),Ot=S(),ht=M(),Et="mock source map";function St(e,t,n,r,i){It(e,r);let s=e.program.body.find(_=>(0,c.isFunctionDeclaration)(_))||e.program.body.find(_=>(0,c.isExpressionStatement)(_))||void 0;(0,G.strict)(s,"[Reanimated] `draftExpression` is undefined.");let a=(0,c.isFunctionDeclaration)(s)?s:s.expression;(0,G.strict)("params"in a,"'params' property is undefined in 'expression'"),(0,G.strict)((0,c.isBlockStatement)(a.body),"[Reanimated] `expression.body` is not a `BlockStatement`");let u=new Set;(0,se.traverse)(e,{NewExpression(_){if(!(0,c.isIdentifier)(_.node.callee))return;let x=_.node.callee.name;if(!n.some(H=>H.name===x)||u.has(x))return;let D=n.findIndex(H=>H.name===x);n.splice(D,1);let ne=x+Ot.workletClassFactorySuffix;n.push((0,c.identifier)(ne)),(0,c.assertBlockStatement)(a.body),a.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(x),(0,c.callExpression)((0,c.identifier)(ne),[]))])),u.add(x)}});let p=(0,c.functionExpression)((0,c.identifier)(r),a.params,a.body,a.generator,a.async),d=(0,gt.default)(p).code;(0,G.strict)(i,"[Reanimated] `inputMap` is undefined.");let v=!((0,ht.isRelease)()||t.opts.disableSourceMaps);if(v){i.sourcesContent=[];for(let _ of i.sources)i.sourcesContent.push(vt.readFileSync(_).toString("utf-8"))}let j=(0,se.transformSync)(d,{plugins:[Ct(n)],compact:!0,sourceMaps:v,inputSourceMap:i,ast:!1,babelrc:!1,configFile:!1,comments:!1});(0,G.strict)(j,"[Reanimated] `transformed` is null.");let w;return v&&(Wt()?w=Et:(w=_t.fromObject(j.map).toObject(),delete w.sourcesContent)),[j.code,JSON.stringify(w)]}O.buildWorkletString=St;function It(e,t){(0,se.traverse)(e,{FunctionExpression(n){if(!n.node.id){n.stop();return}let r=n.node.id.name;n.scope.rename(r,t)}})}function Wt(){return process.env.REANIMATED_JEST_SHOULD_MOCK_SOURCE_MAP==="1"}function xt(e,t,n){t.length===0||!(0,c.isProgram)(e.parent)||(0,c.isExpression)(e.node.body)||e.node.body.body.unshift(n)}function Ft(e){var t;(0,c.isProgram)(e.parent)&&!(0,c.isArrowFunctionExpression)(e.node)&&!(0,c.isObjectMethod)(e.node)&&e.node.id&&e.scope.parent&&((t=e.scope.parent.bindings[e.node.id.name])===null||t===void 0?void 0:t.references)>0&&e.node.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(e.node.id.name),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("_recur")))]))}function Ct(e){let t=(0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.objectPattern)(e.map(n=>(0,c.objectProperty)((0,c.identifier)(n.name),(0,c.identifier)(n.name),!1,!0))),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("__closure")))]);return{visitor:{"FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod":n=>{xt(n,e,t),Ft(n)}}}}});var he=b(P=>{"use strict";var wt=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});P.makeWorkletFactory=void 0;var ve=require("@babel/core"),jt=wt(require("@babel/generator")),o=require("@babel/types"),F=require("assert"),Oe=require("path"),Dt=oe(),_e=S(),ae=M(),Rt=ge(),At=require("../package.json").version,Mt="x.y.z",Pt=[require.resolve("@babel/preset-typescript")],qt=[require.resolve("@babel/plugin-transform-shorthand-properties"),require.resolve("@babel/plugin-transform-arrow-functions"),require.resolve("@babel/plugin-transform-optional-chaining"),require.resolve("@babel/plugin-transform-nullish-coalescing-operator"),[require.resolve("@babel/plugin-transform-template-literals"),{loose:!0}]];function zt(e,t){Lt(e),(0,F.strict)(t.file.opts.filename,"[Reanimated] `state.file.opts.filename` is undefined.");let n=(0,jt.default)(e.node,{sourceMaps:!0,sourceFileName:t.file.opts.filename});n.code="("+(e.isObjectMethod()?"function ":"")+n.code+`
)`;let r=(0,ve.transformSync)(n.code,{filename:t.file.opts.filename,presets:Pt,plugins:qt,ast:!0,babelrc:!1,configFile:!1,inputSourceMap:n.map});(0,F.strict)(r,"[Reanimated] `transformed` is undefined."),(0,F.strict)(r.ast,"[Reanimated] `transformed.ast` is undefined.");let i=Bt(r.ast,e),s=(0,o.cloneNode)(e.node),a=(0,o.isBlockStatement)(s.body)?(0,o.functionExpression)(null,s.params,s.body,s.generator,s.async):s,{workletName:u,reactName:p}=Ut(e,t),[d,v]=(0,Rt.buildWorkletString)(r.ast,t,i,u,r.map);(0,F.strict)(d,"[Reanimated] `funString` is undefined.");let j=Nt(d),w=1;i.length>0&&(w-=i.length+2);let _=e.parentPath.isProgram()?e:e.findParent(k=>{var re,ie;return(ie=(re=k.parentPath)===null||re===void 0?void 0:re.isProgram())!==null&&ie!==void 0?ie:!1});(0,F.strict)(_,"[Reanimated] `pathForStringDefinitions` is null."),(0,F.strict)(_.parentPath,"[Reanimated] `pathForStringDefinitions.parentPath` is null.");let x=_.parentPath.scope.generateUidIdentifier(`worklet_${j}_init_data`),D=(0,o.objectExpression)([(0,o.objectProperty)((0,o.identifier)("code"),(0,o.stringLiteral)(d))]);if(!(0,ae.isRelease)()){let k=t.file.opts.filename;t.opts.relativeSourceLocation&&(k=(0,Oe.relative)(t.cwd,k),v=v==null?void 0:v.replace(t.file.opts.filename,k)),D.properties.push((0,o.objectProperty)((0,o.identifier)("location"),(0,o.stringLiteral)(k)))}v&&D.properties.push((0,o.objectProperty)((0,o.identifier)("sourceMap"),(0,o.stringLiteral)(v))),!(0,ae.isRelease)()&&D.properties.push((0,o.objectProperty)((0,o.identifier)("version"),(0,o.stringLiteral)(Tt()?Mt:At)));let pe=!t.opts.omitNativeOnlyData;pe&&_.insertBefore((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)(x,D)])),(0,F.strict)(!(0,o.isFunctionDeclaration)(a),"[Reanimated] `funExpression` is a `FunctionDeclaration`."),(0,F.strict)(!(0,o.isObjectMethod)(a),"[Reanimated] `funExpression` is an `ObjectMethod`.");let N=[(0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)(p),a)]),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__closure"),!1),(0,o.objectExpression)(i.map(k=>k.name.endsWith(_e.workletClassFactorySuffix)?(0,o.objectProperty)((0,o.identifier)(k.name),(0,o.memberExpression)((0,o.identifier)(k.name.slice(0,k.name.length-_e.workletClassFactorySuffix.length)),(0,o.identifier)(k.name))):(0,o.objectProperty)((0,o.identifier)(k.name),k,!1,!0))))),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__workletHash"),!1),(0,o.numericLiteral)(j)))];return pe&&N.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__initData"),!1),x))),(0,ae.isRelease)()||(N.unshift((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)("_e"),(0,o.arrayExpression)([(0,o.newExpression)((0,o.memberExpression)((0,o.identifier)("global"),(0,o.identifier)("Error")),[]),(0,o.numericLiteral)(w),(0,o.numericLiteral)(-27)]))])),N.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__stackDetails"),!1),(0,o.identifier)("_e"))))),N.push((0,o.returnStatement)((0,o.identifier)(p))),(0,o.functionExpression)(void 0,[],(0,o.blockStatement)(N))}P.makeWorkletFactory=zt;function Lt(e){e.traverse({DirectiveLiteral(t){t.node.value==="worklet"&&t.getFunctionParent()===e&&t.parentPath.remove()}})}function Tt(){return process.env.REANIMATED_JEST_SHOULD_MOCK_VERSION==="1"}function Nt(e){let t=e.length,n=5381,r=52711;for(;t--;){let i=e.charCodeAt(t);n=n*33^i,r=r*33^i}return(n>>>0)*4096+(r>>>0)}function Ut(e,t){let n="unknownFile";if(t.file.opts.filename){let a=t.file.opts.filename;n=(0,Oe.basename)(a);let u=a.split("/"),p=u.indexOf("node_modules");p!==-1&&(n=`${u[p+1]}_${n}`)}let r=`${n}${t.workletNumber++}`,i="";(0,o.isObjectMethod)(e.node)&&(0,o.isIdentifier)(e.node.key)?i=e.node.key.name:((0,o.isFunctionDeclaration)(e.node)||(0,o.isFunctionExpression)(e.node))&&(0,o.isIdentifier)(e.node.id)&&(i=e.node.id.name);let s=i?(0,o.toIdentifier)(`${i}_${r}`):(0,o.toIdentifier)(r);return i=i||(0,o.toIdentifier)(r),{workletName:s,reactName:i}}function Bt(e,t){let n=new Map,r=new Map;return(0,ve.traverse)(e,{Identifier(i){if(!i.isReferencedIdentifier())return;let s=i.node.name;if(Dt.globals.has(s)||"id"in t.node&&t.node.id&&t.node.id.name===s)return;let a=i.parent;if((0,o.isMemberExpression)(a)&&a.property===i.node&&!a.computed||(0,o.isObjectProperty)(a)&&(0,o.isObjectExpression)(i.parentPath.parent)&&i.node!==a.value)return;let u=i.scope;for(;u!=null;){if(u.bindings[s]!=null)return;u=u.parent}n.set(s,i.node),r.set(s,!1)}}),t.traverse({Identifier(i){if(!i.isReferencedIdentifier())return;let s=n.get(i.node.name);!s||r.get(i.node.name)||(s.loc=i.node.loc,r.set(i.node.name,!0))}}),Array.from(n.values())}});var Ee=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.makeWorkletFactoryCall=void 0;var Gt=require("@babel/types"),Ht=he();function Zt(e,t){let n=(0,Ht.makeWorkletFactory)(e,t),r=(0,Gt.callExpression)(n,[]);return Vt(e,r),r}Z.makeWorkletFactoryCall=Zt;function Vt(e,t){let n=e.node.loc;n&&(t.callee.loc={filename:n.filename,identifierName:n.identifierName,start:n.start,end:n.start})}});var V=b(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.substituteObjectMethodWithObjectProperty=C.processWorklet=C.processIfWithWorkletDirective=void 0;var le=require("@babel/types"),Jt=S(),Xt=M(),$t=Ee();function Se(e,t){return!(0,le.isBlockStatement)(e.node.body)||!Yt(e.node.body.directives)?!1:(Ie(e,t),!0)}C.processIfWithWorkletDirective=Se;function Ie(e,t){t.opts.processNestedWorklets&&e.traverse({[Jt.WorkletizableFunction](r,i){Se(r,i)}},t);let n=(0,$t.makeWorkletFactoryCall)(e,t);Kt(e,n)}C.processWorklet=Ie;function Yt(e){return e.some(t=>(0,le.isDirectiveLiteral)(t.value)&&t.value.value==="worklet")}function Kt(e,t){var n;if(e.isObjectMethod())We(e,t);else{let r="id"in e.node?(n=e.node.id)===null||n===void 0?void 0:n.name:void 0;(0,Xt.replaceWithFactoryCall)(e,r,t)}}function We(e,t){let n=(0,le.objectProperty)(e.node.key,t);e.replaceWith(n)}C.substituteObjectMethodWithObjectProperty=We});var Fe=b(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.isGestureHandlerEventCallback=void 0;var I=require("@babel/types"),Qt=new Set(["Tap","Pan","Pinch","Rotation","Fling","LongPress","ForceTouch","Native","Manual","Race","Simultaneous","Exclusive","Hover"]),en=new Set(["onBegin","onStart","onEnd","onFinalize","onUpdate","onChange","onTouchesDown","onTouchesMove","onTouchesUp","onTouchesCancelled"]);function tn(e){return(0,I.isCallExpression)(e.parent)&&(0,I.isExpression)(e.parent.callee)&&nn(e.parent.callee)}J.isGestureHandlerEventCallback=tn;function nn(e){return(0,I.isMemberExpression)(e)&&(0,I.isIdentifier)(e.property)&&en.has(e.property.name)&&xe(e.object)}function xe(e){return!!(rn(e)||(0,I.isCallExpression)(e)&&(0,I.isMemberExpression)(e.callee)&&xe(e.callee.object))}function rn(e){return(0,I.isCallExpression)(e)&&(0,I.isMemberExpression)(e.callee)&&(0,I.isIdentifier)(e.callee.object)&&e.callee.object.name==="Gesture"&&(0,I.isIdentifier)(e.callee.property)&&Qt.has(e.callee.property.name)}});var je=b(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.isLayoutAnimationCallback=void 0;var W=require("@babel/types"),on=new Set(["BounceIn","BounceInDown","BounceInLeft","BounceInRight","BounceInUp","BounceOut","BounceOutDown","BounceOutLeft","BounceOutRight","BounceOutUp","FadeIn","FadeInDown","FadeInLeft","FadeInRight","FadeInUp","FadeOut","FadeOutDown","FadeOutLeft","FadeOutRight","FadeOutUp","FlipInEasyX","FlipInEasyY","FlipInXDown","FlipInXUp","FlipInYLeft","FlipInYRight","FlipOutEasyX","FlipOutEasyY","FlipOutXDown","FlipOutXUp","FlipOutYLeft","FlipOutYRight","LightSpeedInLeft","LightSpeedInRight","LightSpeedOutLeft","LightSpeedOutRight","PinwheelIn","PinwheelOut","RollInLeft","RollInRight","RollOutLeft","RollOutRight","RotateInDownLeft","RotateInDownRight","RotateInUpLeft","RotateInUpRight","RotateOutDownLeft","RotateOutDownRight","RotateOutUpLeft","RotateOutUpRight","SlideInDown","SlideInLeft","SlideInRight","SlideInUp","SlideOutDown","SlideOutLeft","SlideOutRight","SlideOutUp","StretchInX","StretchInY","StretchOutX","StretchOutY","ZoomIn","ZoomInDown","ZoomInEasyDown","ZoomInEasyUp","ZoomInLeft","ZoomInRight","ZoomInRotate","ZoomInUp","ZoomOut","ZoomOutDown","ZoomOutEasyDown","ZoomOutEasyUp","ZoomOutLeft","ZoomOutRight","ZoomOutRotate","ZoomOutUp"]),sn=new Set(["Layout","LinearTransition","SequencedTransition","FadingTransition","JumpingTransition","CurvedTransition","EntryExitTransition"]),Ce=new Set([...on,...sn]),an=new Set(["build","duration","delay","getDuration","randomDelay","getDelay","getDelayFunction"]),ln=new Set(["easing","rotate","springify","damping","mass","stiffness","overshootClamping","restDisplacementThreshold","restSpeedThreshold","withInitialValues","getAnimationAndConfig"]),cn=new Set(["easingX","easingY","easingWidth","easingHeight","entering","exiting","reverse"]),un=new Set([...an,...ln,...cn]),dn=new Set(["withCallback"]);function fn(e){return(0,W.isCallExpression)(e.parent)&&(0,W.isExpression)(e.parent.callee)&&pn(e.parent.callee)}X.isLayoutAnimationCallback=fn;function pn(e){return(0,W.isMemberExpression)(e)&&(0,W.isIdentifier)(e.property)&&dn.has(e.property.name)&&we(e.object)}function we(e){return(0,W.isIdentifier)(e)&&Ce.has(e.name)?!0:!!((0,W.isNewExpression)(e)&&(0,W.isIdentifier)(e.callee)&&Ce.has(e.callee.name)||(0,W.isCallExpression)(e)&&(0,W.isMemberExpression)(e.callee)&&(0,W.isIdentifier)(e.callee.property)&&un.has(e.callee.property.name)&&we(e.callee.object))}});var De=b($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.findReferencedWorklet=void 0;var q=S();function bn(e,t,n){let r=e.node.name,s=e.scope.getBinding(r);return s?t&&s.path.isFunctionDeclaration()?s.path:s.constant?mn(s,t,n):yn(s,t,n):void 0}$.findReferencedWorklet=bn;function mn(e,t,n){let r=e.path;if(!r.isVariableDeclarator())return;let i=r.get("init");if(t&&(0,q.isWorkletizableFunctionPath)(i)||n&&(0,q.isWorkletizableObjectPath)(i))return i}function yn(e,t,n){let r=e.constantViolations.reverse().find(s=>s.isAssignmentExpression()&&(t&&(0,q.isWorkletizableFunctionPath)(s.get("right"))||n&&(0,q.isWorkletizableObjectPath)(s.get("right"))));if(!r||!r.isAssignmentExpression())return;let i=r.get("right");if(t&&(0,q.isWorkletizableFunctionPath)(i)||n&&(0,q.isWorkletizableObjectPath)(i))return i}});var Ae=b(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.processWorkletizableObject=void 0;var kn=S(),Re=V();function gn(e,t){let n=e.get("properties");for(let r of n)if(r.isObjectMethod())(0,Re.processWorklet)(r,t);else if(r.isObjectProperty()){let i=r.get("value");(0,kn.isWorkletizableFunctionPath)(i)&&(0,Re.processWorklet)(i,t)}else throw new Error(`[Reanimated] '${r.type}' as to-be workletized argument is not supported for object hooks.`)}Y.processWorkletizableObject=gn});var ze=b(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.processCalleesAutoworkletizableCallbacks=z.processIfAutoworkletizableCallback=void 0;var _n=require("@babel/types"),K=S(),qe=V(),vn=Fe(),On=je(),hn=De(),En=Ae(),Me=new Set(["useAnimatedGestureHandler","useAnimatedScrollHandler"]),Pe=new Set(["useFrameCallback","useAnimatedStyle","useAnimatedProps","createAnimatedPropAdapter","useDerivedValue","useAnimatedScrollHandler","useAnimatedReaction","useWorkletCallback","withTiming","withSpring","withDecay","withRepeat","runOnUI","executeOnUIRuntimeSync"]),Sn=new Map([["useAnimatedGestureHandler",[0]],["useFrameCallback",[0]],["useAnimatedStyle",[0]],["useAnimatedProps",[0]],["createAnimatedPropAdapter",[0]],["useDerivedValue",[0]],["useAnimatedScrollHandler",[0]],["useAnimatedReaction",[0,1]],["useWorkletCallback",[0]],["withTiming",[2]],["withSpring",[2]],["withDecay",[1]],["withRepeat",[3]],["runOnUI",[0]],["executeOnUIRuntimeSync",[0]]]);function In(e,t){return(0,vn.isGestureHandlerEventCallback)(e)||(0,On.isLayoutAnimationCallback)(e)?((0,qe.processWorklet)(e,t),!0):!1}z.processIfAutoworkletizableCallback=In;function Wn(e,t){let n=(0,_n.isSequenceExpression)(e.node.callee)?e.node.callee.expressions[e.node.callee.expressions.length-1]:e.node.callee,r="name"in n?n.name:"property"in n&&"name"in n.property?n.property.name:void 0;if(r!==void 0&&(Pe.has(r)||Me.has(r))){let i=Pe.has(r),s=Me.has(r),a=Sn.get(r),u=e.get("arguments").filter((p,d)=>a.includes(d));xn(u,t,i,s)}}z.processCalleesAutoworkletizableCallbacks=Wn;function xn(e,t,n,r){e.forEach(i=>{let s=Fn(i,n,r);s&&((0,K.isWorkletizableFunctionPath)(s)?(0,qe.processWorklet)(s,t):(0,K.isWorkletizableObjectPath)(s)&&(0,En.processWorkletizableObject)(s,t))})}function Fn(e,t,n){if(t&&(0,K.isWorkletizableFunctionPath)(e)||n&&(0,K.isWorkletizableObjectPath)(e))return e;if(e.isReferencedIdentifier()&&e.isIdentifier())return(0,hn.findReferencedWorklet)(e,t,n)}});var Ue=b(L=>{"use strict";var Le=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(L,"__esModule",{value:!0});L.processIfWorkletClass=void 0;var Cn=require("@babel/core"),wn=Le(require("@babel/generator")),jn=Le(require("@babel/traverse")),l=require("@babel/types"),Q=require("assert"),Dn=S(),Rn=M(),Te="__workletClass";function An(e,t){return Zn(e,t)?(Nn(e.node.body),Mn(e,t),!0):!1}L.processIfWorkletClass=An;function Mn(e,t){(0,Q.strict)(e.node.id);let n=e.node.id.name,r=Pn(e.node,t);Un(r),qn(r.program.body),zn(r.program.body,n),r.program.body.push((0,l.returnStatement)((0,l.identifier)(n)));let i=(0,l.functionExpression)(null,[],(0,l.blockStatement)([...r.program.body])),s=(0,l.callExpression)(i,[]);(0,Rn.replaceWithFactoryCall)(e,n,s)}function Pn(e,t){let n=(0,wn.default)(e).code,r=(0,Cn.transformSync)(n,{plugins:["@babel/plugin-transform-class-properties","@babel/plugin-transform-classes","@babel/plugin-transform-unicode-regex"],filename:t.file.opts.filename,ast:!0,babelrc:!1,configFile:!1});return(0,Q.strict)(r&&r.ast),r.ast}function qn(e){e.forEach(t=>{if((0,l.isFunctionDeclaration)(t)){let n=(0,l.directive)((0,l.directiveLiteral)("worklet"));t.body.directives.push(n)}})}function zn(e,t){let n=t+Dn.workletClassFactorySuffix,r=Ln(e,t),s=e[r].declarations[0].init,a=(0,l.functionDeclaration)((0,l.identifier)(n),[],(0,l.blockStatement)([(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),s)]),(0,l.expressionStatement)((0,l.assignmentExpression)("=",(0,l.memberExpression)((0,l.identifier)(t),(0,l.identifier)(n)),(0,l.identifier)(n))),(0,l.returnStatement)((0,l.identifier)(t))],[(0,l.directive)((0,l.directiveLiteral)("worklet"))])),u=(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),(0,l.callExpression)((0,l.identifier)(n),[]))]);e.splice(r,1,a,u)}function Ln(e,t){let n=e.findIndex(r=>(0,l.isVariableDeclaration)(r)&&r.declarations.some(i=>(0,l.isIdentifier)(i.id)&&i.id.name===t));return(0,Q.strict)(n>=0),n}function Tn(e){return e.body.some(t=>(0,l.isClassProperty)(t)&&(0,l.isIdentifier)(t.key)&&t.key.name===Te)}function Nn(e){e.body=e.body.filter(t=>!(0,l.isClassProperty)(t)||!(0,l.isIdentifier)(t.key)||t.key.name!==Te)}function Un(e){let t=Bn(e),n=Gn(t),r=t.map(u=>u.index),i=n.map(u=>u.index),s=e.program.body,a=[...s];for(let u=0;u<t.length;u++){let p=i[u],d=r[u],v=a[p];s[d]=v}}function Bn(e){let t=[];return(0,jn.default)(e,{Program:{enter:n=>{n.get("body").forEach((i,s)=>{var a;let u=i.getBindingIdentifiers();if(!i.isFunctionDeclaration()||!(!((a=i.node.id)===null||a===void 0)&&a.name))return;let p={name:i.node.id.name,index:s,dependencies:new Set};t.push(p),i.traverse({Identifier(d){Hn(d,u,i)&&p.dependencies.add(d.node.name)}})})}}}),t}function Gn(e){let t=[],n=new Set;for(let r of e)Ne(r,e,t,n);return t}function Ne(e,t,n,r){if(r.has(e.name))throw new Error("Cycle detected. This should never happen.");if(!n.find(i=>i.name===e.name)){r.add(e.name);for(let i of e.dependencies)if(!n.find(s=>s.name===i)){let s=t.find(a=>a.name===i);(0,Q.strict)(s),Ne(s,t,n,r)}n.push(e),r.delete(e.name)}}function Hn(e,t,n){return e.isReferencedIdentifier()&&!(e.node.name in t)&&!n.scope.hasOwnBinding(e.node.name)&&n.scope.hasReference(e.node.name)}function Zn(e,t){var n;let r=(n=e.node.id)===null||n===void 0?void 0:n.name,i=e.node;if(!r)return!1;let s=Tn(i.body),a=t.classesToWorkletize.some(d=>d.node===i),u=e.parentPath.isProgram()&&t.classesToWorkletize.some(d=>d.name===r);return t.classesToWorkletize=t.classesToWorkletize.filter(d=>d.node!==i&&d.name!==r),s||a||u}});var ce=b(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.isContextObject=E.processIfWorkletContextObject=E.contextObjectMarker=void 0;var h=require("@babel/types");E.contextObjectMarker="__workletContextObject";function Vn(e,t){return Be(e.node)?(Xn(e.node),Jn(e.node),!0):!1}E.processIfWorkletContextObject=Vn;function Be(e){return e.properties.some(t=>(0,h.isObjectProperty)(t)&&(0,h.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker)}E.isContextObject=Be;function Jn(e){let t=(0,h.functionExpression)(null,[],(0,h.blockStatement)([(0,h.returnStatement)((0,h.cloneNode)(e))],[(0,h.directive)((0,h.directiveLiteral)("worklet"))]));e.properties.push((0,h.objectProperty)((0,h.identifier)(`${E.contextObjectMarker}Factory`),t))}function Xn(e){e.properties=e.properties.filter(t=>!((0,h.isObjectProperty)(t)&&(0,h.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker))}});var Je=b(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.isImplicitContextObject=T.processIfWorkletFile=void 0;var m=require("@babel/types"),Ge=S(),He=ce();function $n(e,t){return e.node.directives.some(n=>n.value.value==="worklet")?(e.node.directives=e.node.directives.filter(n=>n.value.value!=="worklet"),Yn(e,t),!0):!1}T.processIfWorkletFile=$n;function Yn(e,t){let n=e.get("body");or(e.node),n.forEach(r=>{let i=Kn(r);ue(i,t)})}function Kn(e){return e.isExportNamedDeclaration()||e.isExportDefaultDeclaration()?e.get("declaration"):e}function ue(e,t){var n;(0,Ge.isWorkletizableFunctionPath)(e)?(e.isArrowFunctionExpression()&&tr(e.node),Ze(e.node.body)):(0,Ge.isWorkletizableObjectPath)(e)?Ve(e)?nr(e.node):er(e,t):e.isVariableDeclaration()?Qn(e,t):e.isClassDeclaration()&&(ir(e.node.body),!((n=e.node.id)===null||n===void 0)&&n.name&&t.classesToWorkletize.push({node:e.node,name:e.node.id.name}))}function Qn(e,t){e.get("declarations").forEach(r=>{let i=r.get("init");i.isExpression()&&ue(i,t)})}function er(e,t){e.get("properties").forEach(r=>{if(r.isObjectMethod())Ze(r.node.body);else if(r.isObjectProperty()){let i=r.get("value");ue(i,t)}})}function tr(e){(0,m.isBlockStatement)(e.body)||(e.body=(0,m.blockStatement)([(0,m.returnStatement)(e.body)]))}function Ze(e){e.directives.some(t=>t.value.value==="worklet")||e.directives.push((0,m.directive)((0,m.directiveLiteral)("worklet")))}function nr(e){e.properties.some(t=>(0,m.isObjectProperty)(t)&&(0,m.isIdentifier)(t.key)&&t.key.name===He.contextObjectMarker)||e.properties.push((0,m.objectProperty)((0,m.identifier)(`${He.contextObjectMarker}`),(0,m.booleanLiteral)(!0)))}function Ve(e){return e.get("properties").some(n=>n.isObjectMethod()?rr(n):!1)}T.isImplicitContextObject=Ve;function rr(e){let t=!1;return e.traverse({ThisExpression(n){t=!0,n.stop()}}),t}function ir(e){e.body.push((0,m.classProperty)((0,m.identifier)("__workletClass"),(0,m.booleanLiteral)(!0)))}function or(e){let t=e.body,n=t.length,r=0;for(;r<n;){let i=t[r];if(!sr(i)){r++;continue}let s=t.splice(r,1);t.push(...s),n--}}function sr(e){return(0,m.isExpressionStatement)(e)&&(0,m.isAssignmentExpression)(e.expression)&&(0,m.isMemberExpression)(e.expression.left)&&(0,m.isIdentifier)(e.expression.left.object)&&e.expression.left.object.name==="exports"}});var Xe=b(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.processInlineStylesWarning=void 0;var f=require("@babel/types"),ar=M(),de=require("assert");function lr(e){return(0,f.callExpression)((0,f.arrowFunctionExpression)([],(0,f.blockStatement)([(0,f.expressionStatement)((0,f.callExpression)((0,f.memberExpression)((0,f.identifier)("console"),(0,f.identifier)("warn")),[(0,f.callExpression)((0,f.memberExpression)((0,f.callExpression)((0,f.identifier)("require"),[(0,f.stringLiteral)("react-native-reanimated")]),(0,f.identifier)("getUseOfValueInStyleWarning")),[])])),(0,f.returnStatement)(e.node)])),[])}function cr(e){e.isMemberExpression()&&(0,f.isIdentifier)(e.node.property)&&e.node.property.name==="value"&&e.replaceWith(lr(e))}function ur(e){if((0,f.isArrayExpression)(e.node)){let t=e.get("elements");(0,de.strict)(Array.isArray(t),"[Reanimated] `elements` should be an array.");for(let n of t)n.isObjectExpression()&&fe(n)}}function fe(e){let t=e.get("properties");for(let n of t)if(n.isObjectProperty()){let r=n.get("value");(0,f.isIdentifier)(n.node.key)&&n.node.key.name==="transform"?ur(r):cr(r)}}function dr(e,t){if((0,ar.isRelease)()||t.opts.disableInlineStylesWarning||e.node.name.name!=="style"||!(0,f.isJSXExpressionContainer)(e.node.value))return;let n=e.get("value").get("expression");if((0,de.strict)(!Array.isArray(n),"[Reanimated] `expression` should not be an array."),n.isArrayExpression()){let r=n.get("elements");(0,de.strict)(Array.isArray(r),"[Reanimated] `elements` should be an array.");for(let i of r)i.isObjectExpression()&&fe(i)}else n.isObjectExpression()&&fe(n)}ee.processInlineStylesWarning=dr});var Ye=b(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.substituteWebCallExpression=void 0;var $e=require("@babel/types");function fr(e){let t=e.node.callee;if((0,$e.isIdentifier)(t)){let n=t.name;(n==="isWeb"||n==="shouldBeUseWeb")&&e.replaceWith((0,$e.booleanLiteral)(!0))}}te.substituteWebCallExpression=fr});Object.defineProperty(exports,"__esModule",{value:!0});var Ke=ze(),pr=Ue(),br=ce(),mr=Je(),yr=oe(),kr=Xe(),gr=S(),_r=Ye(),vr=V();module.exports=function(){function e(t){try{t()}catch(n){throw new Error(`[Reanimated] Babel plugin exception: ${n}`)}}return{name:"reanimated",pre(){e(()=>{(0,yr.initializeState)(this)})},visitor:{CallExpression:{enter(t,n){e(()=>{(0,Ke.processCalleesAutoworkletizableCallbacks)(t,n),n.opts.substituteWebPlatformChecks&&(0,_r.substituteWebCallExpression)(t)})}},[gr.WorkletizableFunction]:{enter(t,n){e(()=>{(0,vr.processIfWithWorkletDirective)(t,n)||(0,Ke.processIfAutoworkletizableCallback)(t,n)})}},ObjectExpression:{enter(t,n){e(()=>{(0,br.processIfWorkletContextObject)(t,n)})}},ClassDeclaration:{enter(t,n){e(()=>{(0,pr.processIfWorkletClass)(t,n)})}},Program:{enter(t,n){e(()=>{(0,mr.processIfWorkletFile)(t,n)})}},JSXAttribute:{enter(t,n){e(()=>(0,kr.processInlineStylesWarning)(t,n))}}}}};
//# sourceMappingURL=index.js.map
