"use strict";var ot=Object.create;var ke=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var lt=Object.getPrototypeOf,ct=Object.prototype.hasOwnProperty;var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ut=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of at(t))!ct.call(e,i)&&i!==r&&ke(e,i,{get:()=>t[i],enumerable:!(n=st(t,i))||n.enumerable});return e};var M=(e,t,r)=>(r=e!=null?ot(lt(e)):{},ut(t||!e||!e.__esModule?ke(r,"default",{value:e,enumerable:!0}):r,e));var Oe=m(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.isGestureObjectEventCallbackMethod=C.isGestureHandlerEventCallback=C.gestureHandlerBuilderMethods=void 0;var I=require("@babel/types"),dt=new Set(["Tap","Pan","Pinch","Rotation","Fling","LongPress","ForceTouch","Native","Manual","Race","Simultaneous","Exclusive","Hover"]);C.gestureHandlerBuilderMethods=new Set(["onBegin","onStart","onEnd","onFinalize","onUpdate","onChange","onTouchesDown","onTouchesMove","onTouchesUp","onTouchesCancelled"]);function ft(e){return(0,I.isCallExpression)(e.parent)&&(0,I.isExpression)(e.parent.callee)&&ge(e.parent.callee)}C.isGestureHandlerEventCallback=ft;function ge(e){return(0,I.isMemberExpression)(e)&&(0,I.isIdentifier)(e.property)&&C.gestureHandlerBuilderMethods.has(e.property.name)&&_e(e.object)}C.isGestureObjectEventCallbackMethod=ge;function _e(e){return!!(pt(e)||(0,I.isCallExpression)(e)&&(0,I.isMemberExpression)(e.callee)&&_e(e.callee.object))}function pt(e){return(0,I.isCallExpression)(e)&&(0,I.isMemberExpression)(e.callee)&&(0,I.isIdentifier)(e.callee.object)&&e.callee.object.name==="Gesture"&&(0,I.isIdentifier)(e.callee.property)&&dt.has(e.callee.property.name)}});var S=m(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.workletClassFactorySuffix=y.isWorkletizableObjectNode=y.isWorkletizableObjectPath=y.isWorkletizableFunctionNode=y.isWorkletizableFunctionPath=y.WorkletizableObject=y.WorkletizableFunction=void 0;var G=require("@babel/types");y.WorkletizableFunction="FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod";y.WorkletizableObject="ObjectExpression";function mt(e){return e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()||e.isObjectMethod()}y.isWorkletizableFunctionPath=mt;function bt(e){return(0,G.isFunctionDeclaration)(e)||(0,G.isFunctionExpression)(e)||(0,G.isArrowFunctionExpression)(e)||(0,G.isObjectMethod)(e)}y.isWorkletizableFunctionNode=bt;function yt(e){return e.isObjectExpression()}y.isWorkletizableObjectPath=yt;function kt(e){return(0,G.isObjectExpression)(e)}y.isWorkletizableObjectNode=kt;y.workletClassFactorySuffix="__classFactory"});var P=m(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.replaceWithFactoryCall=A.isRelease=void 0;var H=require("@babel/types");function gt(){var e,t;let r=/(prod|release|stag[ei])/i;return!!(!((e=process.env.BABEL_ENV)===null||e===void 0)&&e.match(r)||!((t=process.env.NODE_ENV)===null||t===void 0)&&t.match(r))}A.isRelease=gt;function _t(e,t,r){if(!t||!Ot(e))e.replaceWith(r);else{let n=(0,H.variableDeclaration)("const",[(0,H.variableDeclarator)((0,H.identifier)(t),r)]);e.replaceWith(n)}}A.replaceWithFactoryCall=_t;function Ot(e){return(0,H.isScopable)(e.parent)||(0,H.isExportNamedDeclaration)(e.parent)}});var ae=m(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.addCustomGlobals=g.initializeGlobals=g.globals=g.defaultGlobals=g.initializeState=void 0;var vt=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","Object","Function","Boolean","Symbol","Error","AggregateError","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","InternalError","Number","BigInt","Math","Date","String","RegExp","Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","BigInt64Array","BigUint64Array","Float32Array","Float64Array","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Atomics","JSON","WeakRef","FinalizationRegistry","Iterator","AsyncIterator","Promise","GeneratorFunction","AsyncGeneratorFunction","Generator","AsyncGenerator","AsyncFunction","Reflect","Proxy","Intl","null","this","global","window","globalThis","console","performance","queueMicrotask","requestAnimationFrame","setImmediate","arguments","HermesInternal","_WORKLET","ReanimatedError","__reanimatedLoggerConfig"],ht=["_IS_FABRIC","_log","_toString","_scheduleHostFunctionOnJS","_scheduleRemoteFunctionOnJS","_scheduleOnRuntime","_makeShareableClone","_updatePropsPaper","_updatePropsFabric","_removeFromPropsRegistry","_measurePaper","_measureFabric","_scrollToPaper","_dispatchCommandPaper","_dispatchCommandFabric","_setGestureState","_notifyAboutProgress","_notifyAboutEnd","_runOnUIQueue","_getAnimationTimestamp"];function Et(e){e.workletNumber=1,e.classesToWorkletize=[],ve(),he(e)}g.initializeState=Et;g.defaultGlobals=new Set(vt.concat(ht));function ve(){g.globals=new Set(g.defaultGlobals)}g.initializeGlobals=ve;function he(e){e.opts&&Array.isArray(e.opts.globals)&&e.opts.globals.forEach(t=>{g.globals.add(t)})}g.addCustomGlobals=he});var J=m(q=>{"use strict";var It=q&&q.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(q,"__esModule",{value:!0});q.workletTransformSync=void 0;var St=require("@babel/core");function xt(e,t){let{extraPlugins:r=[],extraPresets:n=[]}=t,i=It(t,["extraPlugins","extraPresets"]);return(0,St.transformSync)(e,Object.assign(Object.assign({},i),{plugins:[...Ct,...r],presets:[...Wt,...n]}))}q.workletTransformSync=xt;var Wt=[require.resolve("@babel/preset-typescript")],Ct=[]});var Se=m(v=>{"use strict";var wt=v&&v.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ft=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ee=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&wt(t,e,r);return Ft(t,e),t},jt=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v,"__esModule",{value:!0});v.buildWorkletString=void 0;var Ie=require("@babel/core"),Dt=jt(require("@babel/generator")),c=require("@babel/types"),Z=require("assert"),Rt=Ee(require("convert-source-map")),Mt=Ee(require("fs")),At=S(),Pt=P(),qt=J(),zt="mock source map";function Lt(e,t,r,n,i){Tt(e,n);let s=e.program.body.find(_=>(0,c.isFunctionDeclaration)(_))||e.program.body.find(_=>(0,c.isExpressionStatement)(_))||void 0;(0,Z.strict)(s,"[Reanimated] `draftExpression` is undefined.");let a=(0,c.isFunctionDeclaration)(s)?s:s.expression;(0,Z.strict)("params"in a,"'params' property is undefined in 'expression'"),(0,Z.strict)((0,c.isBlockStatement)(a.body),"[Reanimated] `expression.body` is not a `BlockStatement`");let u=new Set;(0,Ie.traverse)(e,{NewExpression(_){if(!(0,c.isIdentifier)(_.node.callee))return;let W=_.node.callee.name;if(!r.some(V=>V.name===W)||u.has(W))return;let R=r.findIndex(V=>V.name===W);r.splice(R,1);let ie=W+At.workletClassFactorySuffix;r.push((0,c.identifier)(ie)),(0,c.assertBlockStatement)(a.body),a.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(W),(0,c.callExpression)((0,c.identifier)(ie),[]))])),u.add(W)}});let p=(0,c.functionExpression)((0,c.identifier)(n),a.params,a.body,a.generator,a.async),d=(0,Dt.default)(p).code;(0,Z.strict)(i,"[Reanimated] `inputMap` is undefined.");let O=!((0,Pt.isRelease)()||t.opts.disableSourceMaps);if(O){i.sourcesContent=[];for(let _ of i.sources)i.sourcesContent.push(Mt.readFileSync(_).toString("utf-8"))}let D=(0,qt.workletTransformSync)(d,{filename:t.file.opts.filename,extraPlugins:[Gt(r)],compact:!0,sourceMaps:O,inputSourceMap:i,ast:!1,babelrc:!1,configFile:!1,comments:!1});(0,Z.strict)(D,"[Reanimated] `transformed` is null.");let j;return O&&(Nt()?j=zt:(j=Rt.fromObject(D.map).toObject(),delete j.sourcesContent)),[D.code,JSON.stringify(j)]}v.buildWorkletString=Lt;function Tt(e,t){(0,Ie.traverse)(e,{FunctionExpression(r){if(!r.node.id){r.stop();return}let n=r.node.id.name;r.scope.rename(n,t)}})}function Nt(){return process.env.REANIMATED_JEST_SHOULD_MOCK_SOURCE_MAP==="1"}function Bt(e,t,r){t.length===0||!(0,c.isProgram)(e.parent)||(0,c.isExpression)(e.node.body)||e.node.body.body.unshift(r)}function Ut(e){var t;(0,c.isProgram)(e.parent)&&!(0,c.isArrowFunctionExpression)(e.node)&&!(0,c.isObjectMethod)(e.node)&&e.node.id&&e.scope.parent&&((t=e.scope.parent.bindings[e.node.id.name])===null||t===void 0?void 0:t.references)>0&&e.node.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(e.node.id.name),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("_recur")))]))}function Gt(e){let t=(0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.objectPattern)(e.map(r=>(0,c.objectProperty)((0,c.identifier)(r.name),(0,c.identifier)(r.name),!1,!0))),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("__closure")))]);return{visitor:{"FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod":r=>{Bt(r,e,t),Ut(r)}}}}});var Ce=m(z=>{"use strict";var Ht=z&&z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z,"__esModule",{value:!0});z.makeWorkletFactory=void 0;var Zt=require("@babel/core"),Vt=Ht(require("@babel/generator")),o=require("@babel/types"),w=require("assert"),We=require("path"),Jt=ae(),xe=S(),le=P(),Xt=Se(),$t=J(),Yt=require("../package.json").version,Kt="x.y.z";function Qt(e,t){er(e),(0,w.strict)(t.file.opts.filename,"[Reanimated] `state.file.opts.filename` is undefined.");let r=(0,Vt.default)(e.node,{sourceMaps:!0,sourceFileName:t.file.opts.filename});r.code="("+(e.isObjectMethod()?"function ":"")+r.code+`
)`;let n=(0,$t.workletTransformSync)(r.code,{extraPlugins:or,filename:t.file.opts.filename,ast:!0,babelrc:!1,configFile:!1,inputSourceMap:r.map});(0,w.strict)(n,"[Reanimated] `transformed` is undefined."),(0,w.strict)(n.ast,"[Reanimated] `transformed.ast` is undefined.");let i=ir(n.ast,e),s=(0,o.cloneNode)(e.node),a=(0,o.isBlockStatement)(s.body)?(0,o.functionExpression)(null,s.params,s.body,s.generator,s.async):s,{workletName:u,reactName:p}=nr(e,t),[d,O]=(0,Xt.buildWorkletString)(n.ast,t,i,u,n.map);(0,w.strict)(d,"[Reanimated] `funString` is undefined.");let D=rr(d),j=1;i.length>0&&(j-=i.length+2);let _=e.parentPath.isProgram()?e:e.findParent(k=>{var oe,se;return(se=(oe=k.parentPath)===null||oe===void 0?void 0:oe.isProgram())!==null&&se!==void 0?se:!1});(0,w.strict)(_,"[Reanimated] `pathForStringDefinitions` is null."),(0,w.strict)(_.parentPath,"[Reanimated] `pathForStringDefinitions.parentPath` is null.");let W=_.parentPath.scope.generateUidIdentifier(`worklet_${D}_init_data`),R=(0,o.objectExpression)([(0,o.objectProperty)((0,o.identifier)("code"),(0,o.stringLiteral)(d))]);if(!(0,le.isRelease)()){let k=t.file.opts.filename;t.opts.relativeSourceLocation&&(k=(0,We.relative)(t.cwd,k),O=O==null?void 0:O.replace(t.file.opts.filename,k)),R.properties.push((0,o.objectProperty)((0,o.identifier)("location"),(0,o.stringLiteral)(k)))}O&&R.properties.push((0,o.objectProperty)((0,o.identifier)("sourceMap"),(0,o.stringLiteral)(O))),!(0,le.isRelease)()&&R.properties.push((0,o.objectProperty)((0,o.identifier)("version"),(0,o.stringLiteral)(tr()?Kt:Yt)));let ye=!t.opts.omitNativeOnlyData;ye&&_.insertBefore((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)(W,R)])),(0,w.strict)(!(0,o.isFunctionDeclaration)(a),"[Reanimated] `funExpression` is a `FunctionDeclaration`."),(0,w.strict)(!(0,o.isObjectMethod)(a),"[Reanimated] `funExpression` is an `ObjectMethod`.");let U=[(0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)(p),a)]),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__closure"),!1),(0,o.objectExpression)(i.map(k=>k.name.endsWith(xe.workletClassFactorySuffix)?(0,o.objectProperty)((0,o.identifier)(k.name),(0,o.memberExpression)((0,o.identifier)(k.name.slice(0,k.name.length-xe.workletClassFactorySuffix.length)),(0,o.identifier)(k.name))):(0,o.objectProperty)((0,o.identifier)(k.name),k,!1,!0))))),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__workletHash"),!1),(0,o.numericLiteral)(D)))];return ye&&U.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__initData"),!1),W))),(0,le.isRelease)()||(U.unshift((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)("_e"),(0,o.arrayExpression)([(0,o.newExpression)((0,o.memberExpression)((0,o.identifier)("global"),(0,o.identifier)("Error")),[]),(0,o.numericLiteral)(j),(0,o.numericLiteral)(-27)]))])),U.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(p),(0,o.identifier)("__stackDetails"),!1),(0,o.identifier)("_e"))))),U.push((0,o.returnStatement)((0,o.identifier)(p))),(0,o.functionExpression)(void 0,[],(0,o.blockStatement)(U))}z.makeWorkletFactory=Qt;function er(e){e.traverse({DirectiveLiteral(t){t.node.value==="worklet"&&t.getFunctionParent()===e&&t.parentPath.remove()}})}function tr(){return process.env.REANIMATED_JEST_SHOULD_MOCK_VERSION==="1"}function rr(e){let t=e.length,r=5381,n=52711;for(;t--;){let i=e.charCodeAt(t);r=r*33^i,n=n*33^i}return(r>>>0)*4096+(n>>>0)}function nr(e,t){let r="unknownFile";if(t.file.opts.filename){let a=t.file.opts.filename;r=(0,We.basename)(a);let u=a.split("/"),p=u.indexOf("node_modules");p!==-1&&(r=`${u[p+1]}_${r}`)}let n=`${r}${t.workletNumber++}`,i="";(0,o.isObjectMethod)(e.node)&&(0,o.isIdentifier)(e.node.key)?i=e.node.key.name:((0,o.isFunctionDeclaration)(e.node)||(0,o.isFunctionExpression)(e.node))&&(0,o.isIdentifier)(e.node.id)&&(i=e.node.id.name);let s=i?(0,o.toIdentifier)(`${i}_${n}`):(0,o.toIdentifier)(n);return i=i||(0,o.toIdentifier)(n),{workletName:s,reactName:i}}function ir(e,t){let r=new Map,n=new Map;return(0,Zt.traverse)(e,{Identifier(i){if(!i.isReferencedIdentifier())return;let s=i.node.name;if(Jt.globals.has(s)||"id"in t.node&&t.node.id&&t.node.id.name===s)return;let a=i.parent;if((0,o.isMemberExpression)(a)&&a.property===i.node&&!a.computed||(0,o.isObjectProperty)(a)&&(0,o.isObjectExpression)(i.parentPath.parent)&&i.node!==a.value)return;let u=i.scope;for(;u!=null;){if(u.bindings[s]!=null)return;u=u.parent}r.set(s,i.node),n.set(s,!1)}}),t.traverse({Identifier(i){if(!i.isReferencedIdentifier())return;let s=r.get(i.node.name);!s||n.get(i.node.name)||(s.loc=i.node.loc,n.set(i.node.name,!0))}}),Array.from(r.values())}var or=[require.resolve("@babel/plugin-transform-shorthand-properties"),require.resolve("@babel/plugin-transform-arrow-functions"),require.resolve("@babel/plugin-transform-optional-chaining"),require.resolve("@babel/plugin-transform-nullish-coalescing-operator"),[require.resolve("@babel/plugin-transform-template-literals"),{loose:!0}]]});var we=m(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.makeWorkletFactoryCall=void 0;var sr=require("@babel/types"),ar=Ce();function lr(e,t){let r=(0,ar.makeWorkletFactory)(e,t),n=(0,sr.callExpression)(r,[]);return cr(e,n),n}X.makeWorkletFactoryCall=lr;function cr(e,t){let r=e.node.loc;r&&(t.callee.loc={filename:r.filename,identifierName:r.identifierName,start:r.start,end:r.start})}});var $=m(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.substituteObjectMethodWithObjectProperty=F.processWorklet=F.processIfWithWorkletDirective=void 0;var ce=require("@babel/types"),ur=S(),dr=P(),fr=we();function Fe(e,t){return!(0,ce.isBlockStatement)(e.node.body)||!pr(e.node.body.directives)?!1:(je(e,t),!0)}F.processIfWithWorkletDirective=Fe;function je(e,t){t.opts.processNestedWorklets&&e.traverse({[ur.WorkletizableFunction](n,i){Fe(n,i)}},t);let r=(0,fr.makeWorkletFactoryCall)(e,t);mr(e,r)}F.processWorklet=je;function pr(e){return e.some(t=>(0,ce.isDirectiveLiteral)(t.value)&&t.value.value==="worklet")}function mr(e,t){var r;if(e.isObjectMethod())De(e,t);else{let n="id"in e.node?(r=e.node.id)===null||r===void 0?void 0:r.name:void 0;(0,dr.replaceWithFactoryCall)(e,n,t)}}function De(e,t){let r=(0,ce.objectProperty)(e.node.key,t);e.replaceWith(r)}F.substituteObjectMethodWithObjectProperty=De});var Ae=m(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.isLayoutAnimationCallback=void 0;var x=require("@babel/types"),br=new Set(["BounceIn","BounceInDown","BounceInLeft","BounceInRight","BounceInUp","BounceOut","BounceOutDown","BounceOutLeft","BounceOutRight","BounceOutUp","FadeIn","FadeInDown","FadeInLeft","FadeInRight","FadeInUp","FadeOut","FadeOutDown","FadeOutLeft","FadeOutRight","FadeOutUp","FlipInEasyX","FlipInEasyY","FlipInXDown","FlipInXUp","FlipInYLeft","FlipInYRight","FlipOutEasyX","FlipOutEasyY","FlipOutXDown","FlipOutXUp","FlipOutYLeft","FlipOutYRight","LightSpeedInLeft","LightSpeedInRight","LightSpeedOutLeft","LightSpeedOutRight","PinwheelIn","PinwheelOut","RollInLeft","RollInRight","RollOutLeft","RollOutRight","RotateInDownLeft","RotateInDownRight","RotateInUpLeft","RotateInUpRight","RotateOutDownLeft","RotateOutDownRight","RotateOutUpLeft","RotateOutUpRight","SlideInDown","SlideInLeft","SlideInRight","SlideInUp","SlideOutDown","SlideOutLeft","SlideOutRight","SlideOutUp","StretchInX","StretchInY","StretchOutX","StretchOutY","ZoomIn","ZoomInDown","ZoomInEasyDown","ZoomInEasyUp","ZoomInLeft","ZoomInRight","ZoomInRotate","ZoomInUp","ZoomOut","ZoomOutDown","ZoomOutEasyDown","ZoomOutEasyUp","ZoomOutLeft","ZoomOutRight","ZoomOutRotate","ZoomOutUp"]),yr=new Set(["Layout","LinearTransition","SequencedTransition","FadingTransition","JumpingTransition","CurvedTransition","EntryExitTransition"]),Re=new Set([...br,...yr]),kr=new Set(["build","duration","delay","getDuration","randomDelay","getDelay","getDelayFunction"]),gr=new Set(["easing","rotate","springify","damping","mass","stiffness","overshootClamping","restDisplacementThreshold","restSpeedThreshold","withInitialValues","getAnimationAndConfig"]),_r=new Set(["easingX","easingY","easingWidth","easingHeight","entering","exiting","reverse"]),Or=new Set([...kr,...gr,..._r]),vr=new Set(["withCallback"]);function hr(e){return(0,x.isCallExpression)(e.parent)&&(0,x.isExpression)(e.parent.callee)&&Er(e.parent.callee)}Y.isLayoutAnimationCallback=hr;function Er(e){return(0,x.isMemberExpression)(e)&&(0,x.isIdentifier)(e.property)&&vr.has(e.property.name)&&Me(e.object)}function Me(e){return(0,x.isIdentifier)(e)&&Re.has(e.name)?!0:!!((0,x.isNewExpression)(e)&&(0,x.isIdentifier)(e.callee)&&Re.has(e.callee.name)||(0,x.isCallExpression)(e)&&(0,x.isMemberExpression)(e.callee)&&(0,x.isIdentifier)(e.callee.property)&&Or.has(e.callee.property.name)&&Me(e.callee.object))}});var Pe=m(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.findReferencedWorklet=void 0;var L=S();function ue(e,t,r){let n=e.node.name,s=e.scope.getBinding(n);return s?t&&s.path.isFunctionDeclaration()?s.path:s.constant?Ir(s,t,r):Sr(s,t,r):void 0}K.findReferencedWorklet=ue;function Ir(e,t,r){let n=e.path;if(!n.isVariableDeclarator())return;let i=n.get("init");if(t&&(0,L.isWorkletizableFunctionPath)(i)||r&&(0,L.isWorkletizableObjectPath)(i))return i;if(i.isIdentifier()&&i.isReferencedIdentifier())return ue(i,t,r)}function Sr(e,t,r){let n=e.constantViolations.reverse().find(s=>s.isAssignmentExpression()&&(t&&(0,L.isWorkletizableFunctionPath)(s.get("right"))||r&&(0,L.isWorkletizableObjectPath)(s.get("right"))));if(!n||!n.isAssignmentExpression())return;let i=n.get("right");if(t&&(0,L.isWorkletizableFunctionPath)(i)||r&&(0,L.isWorkletizableObjectPath)(i))return i;if(i.isIdentifier()&&i.isReferencedIdentifier())return ue(i,t,r)}});var ze=m(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.processWorkletizableObject=void 0;var xr=S(),qe=$();function Wr(e,t){let r=e.get("properties");for(let n of r)if(n.isObjectMethod())(0,qe.processWorklet)(n,t);else if(n.isObjectProperty()){let i=n.get("value");(0,xr.isWorkletizableFunctionPath)(i)&&(0,qe.processWorklet)(i,t)}else throw new Error(`[Reanimated] '${n.type}' as to-be workletized argument is not supported for object hooks.`)}Q.processWorkletizableObject=Wr});var Ge=m(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.processCalleesAutoworkletizableCallbacks=T.processIfAutoworkletizableCallback=void 0;var Le=require("@babel/types"),de=Oe(),ee=S(),Ue=$(),Cr=Ae(),wr=Pe(),Fr=ze(),Te=new Set(["useAnimatedGestureHandler","useAnimatedScrollHandler"]),Ne=new Set(["useFrameCallback","useAnimatedStyle","useAnimatedProps","createAnimatedPropAdapter","useDerivedValue","useAnimatedScrollHandler","useAnimatedReaction","useWorkletCallback","withTiming","withSpring","withDecay","withRepeat","runOnUI","executeOnUIRuntimeSync"]),jr=new Map([["useAnimatedGestureHandler",[0]],["useFrameCallback",[0]],["useAnimatedStyle",[0]],["useAnimatedProps",[0]],["createAnimatedPropAdapter",[0]],["useDerivedValue",[0]],["useAnimatedScrollHandler",[0]],["useAnimatedReaction",[0,1]],["useWorkletCallback",[0]],["withTiming",[2]],["withSpring",[2]],["withDecay",[1]],["withRepeat",[3]],["runOnUI",[0]],["executeOnUIRuntimeSync",[0]],...Array.from(de.gestureHandlerBuilderMethods).map(e=>[e,[0]])]);function Dr(e,t){return(0,de.isGestureHandlerEventCallback)(e)||(0,Cr.isLayoutAnimationCallback)(e)?((0,Ue.processWorklet)(e,t),!0):!1}T.processIfAutoworkletizableCallback=Dr;function Rr(e,t){let r=(0,Le.isSequenceExpression)(e.node.callee)?e.node.callee.expressions[e.node.callee.expressions.length-1]:e.node.callee,n="name"in r?r.name:"property"in r&&"name"in r.property?r.property.name:void 0;if(n!==void 0){if(Ne.has(n)||Te.has(n)){let i=Ne.has(n),s=Te.has(n),a=jr.get(n),u=e.get("arguments").filter((p,d)=>a.includes(d));Be(u,t,i,s)}else if(!(0,Le.isV8IntrinsicIdentifier)(r)&&(0,de.isGestureObjectEventCallbackMethod)(r)){let i=e.get("arguments");Be(i,t,!0,!0)}}}T.processCalleesAutoworkletizableCallbacks=Rr;function Be(e,t,r,n){e.forEach(i=>{let s=Mr(i,r,n);s&&((0,ee.isWorkletizableFunctionPath)(s)?(0,Ue.processWorklet)(s,t):(0,ee.isWorkletizableObjectPath)(s)&&(0,Fr.processWorkletizableObject)(s,t))})}function Mr(e,t,r){if(t&&(0,ee.isWorkletizableFunctionPath)(e)||r&&(0,ee.isWorkletizableObjectPath)(e))return e;if(e.isIdentifier()&&e.isReferencedIdentifier())return(0,wr.findReferencedWorklet)(e,t,r)}});var Je=m(N=>{"use strict";var He=N&&N.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N,"__esModule",{value:!0});N.processIfWorkletClass=void 0;var Ar=He(require("@babel/generator")),Pr=He(require("@babel/traverse")),l=require("@babel/types"),te=require("assert"),qr=S(),zr=P(),Lr=J(),Ze="__workletClass";function Tr(e,t){return Kr(e,t)?(Vr(e.node.body),Nr(e,t),!0):!1}N.processIfWorkletClass=Tr;function Nr(e,t){(0,te.strict)(e.node.id);let r=e.node.id.name,n=Br(e.node,t);Jr(n),Ur(n.program.body),Gr(n.program.body,r),n.program.body.push((0,l.returnStatement)((0,l.identifier)(r)));let i=(0,l.functionExpression)(null,[],(0,l.blockStatement)([...n.program.body])),s=(0,l.callExpression)(i,[]);(0,zr.replaceWithFactoryCall)(e,r,s)}function Br(e,t){let r=(0,Ar.default)(e).code,n=(0,Lr.workletTransformSync)(r,{extraPlugins:["@babel/plugin-transform-class-properties","@babel/plugin-transform-classes","@babel/plugin-transform-unicode-regex"],filename:t.file.opts.filename,ast:!0,babelrc:!1,configFile:!1});return(0,te.strict)(n&&n.ast),n.ast}function Ur(e){e.forEach(t=>{if((0,l.isFunctionDeclaration)(t)){let r=(0,l.directive)((0,l.directiveLiteral)("worklet"));t.body.directives.push(r)}})}function Gr(e,t){let r=t+qr.workletClassFactorySuffix,n=Hr(e,t),s=e[n].declarations[0].init,a=(0,l.functionDeclaration)((0,l.identifier)(r),[],(0,l.blockStatement)([(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),s)]),(0,l.expressionStatement)((0,l.assignmentExpression)("=",(0,l.memberExpression)((0,l.identifier)(t),(0,l.identifier)(r)),(0,l.identifier)(r))),(0,l.returnStatement)((0,l.identifier)(t))],[(0,l.directive)((0,l.directiveLiteral)("worklet"))])),u=(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),(0,l.callExpression)((0,l.identifier)(r),[]))]);e.splice(n,1,a,u)}function Hr(e,t){let r=e.findIndex(n=>(0,l.isVariableDeclaration)(n)&&n.declarations.some(i=>(0,l.isIdentifier)(i.id)&&i.id.name===t));return(0,te.strict)(r>=0),r}function Zr(e){return e.body.some(t=>(0,l.isClassProperty)(t)&&(0,l.isIdentifier)(t.key)&&t.key.name===Ze)}function Vr(e){e.body=e.body.filter(t=>!(0,l.isClassProperty)(t)||!(0,l.isIdentifier)(t.key)||t.key.name!==Ze)}function Jr(e){let t=Xr(e),r=$r(t),n=t.map(u=>u.index),i=r.map(u=>u.index),s=e.program.body,a=[...s];for(let u=0;u<t.length;u++){let p=i[u],d=n[u],O=a[p];s[d]=O}}function Xr(e){let t=[];return(0,Pr.default)(e,{Program:{enter:r=>{r.get("body").forEach((i,s)=>{var a;let u=i.getBindingIdentifiers();if(!i.isFunctionDeclaration()||!(!((a=i.node.id)===null||a===void 0)&&a.name))return;let p={name:i.node.id.name,index:s,dependencies:new Set};t.push(p),i.traverse({Identifier(d){Yr(d,u,i)&&p.dependencies.add(d.node.name)}})})}}}),t}function $r(e){let t=[],r=new Set;for(let n of e)Ve(n,e,t,r);return t}function Ve(e,t,r,n){if(n.has(e.name))throw new Error("Cycle detected. This should never happen.");if(!r.find(i=>i.name===e.name)){n.add(e.name);for(let i of e.dependencies)if(!r.find(s=>s.name===i)){let s=t.find(a=>a.name===i);(0,te.strict)(s),Ve(s,t,r,n)}r.push(e),n.delete(e.name)}}function Yr(e,t,r){return e.isReferencedIdentifier()&&!(e.node.name in t)&&!r.scope.hasOwnBinding(e.node.name)&&r.scope.hasReference(e.node.name)}function Kr(e,t){var r;let n=(r=e.node.id)===null||r===void 0?void 0:r.name,i=e.node;if(!n)return!1;let s=Zr(i.body),a=t.classesToWorkletize.some(d=>d.node===i),u=e.parentPath.isProgram()&&t.classesToWorkletize.some(d=>d.name===n);return t.classesToWorkletize=t.classesToWorkletize.filter(d=>d.node!==i&&d.name!==n),s||a||u}});var fe=m(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.isContextObject=E.processIfWorkletContextObject=E.contextObjectMarker=void 0;var h=require("@babel/types");E.contextObjectMarker="__workletContextObject";function Qr(e,t){return Xe(e.node)?(tn(e.node),en(e.node),!0):!1}E.processIfWorkletContextObject=Qr;function Xe(e){return e.properties.some(t=>(0,h.isObjectProperty)(t)&&(0,h.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker)}E.isContextObject=Xe;function en(e){let t=(0,h.functionExpression)(null,[],(0,h.blockStatement)([(0,h.returnStatement)((0,h.cloneNode)(e))],[(0,h.directive)((0,h.directiveLiteral)("worklet"))]));e.properties.push((0,h.objectProperty)((0,h.identifier)(`${E.contextObjectMarker}Factory`),t))}function tn(e){e.properties=e.properties.filter(t=>!((0,h.isObjectProperty)(t)&&(0,h.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker))}});var et=m(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.isImplicitContextObject=B.processIfWorkletFile=void 0;var b=require("@babel/types"),$e=S(),Ye=fe();function rn(e,t){return e.node.directives.some(r=>r.value.value==="worklet")?(e.node.directives=e.node.directives.filter(r=>r.value.value!=="worklet"),nn(e,t),!0):!1}B.processIfWorkletFile=rn;function nn(e,t){let r=e.get("body");fn(e.node),r.forEach(n=>{let i=on(n);pe(i,t)})}function on(e){return e.isExportNamedDeclaration()||e.isExportDefaultDeclaration()?e.get("declaration"):e}function pe(e,t){var r;(0,$e.isWorkletizableFunctionPath)(e)?(e.isArrowFunctionExpression()&&ln(e.node),Ke(e.node.body)):(0,$e.isWorkletizableObjectPath)(e)?Qe(e)?cn(e.node):an(e,t):e.isVariableDeclaration()?sn(e,t):e.isClassDeclaration()&&(dn(e.node.body),!((r=e.node.id)===null||r===void 0)&&r.name&&t.classesToWorkletize.push({node:e.node,name:e.node.id.name}))}function sn(e,t){e.get("declarations").forEach(n=>{let i=n.get("init");i.isExpression()&&pe(i,t)})}function an(e,t){e.get("properties").forEach(n=>{if(n.isObjectMethod())Ke(n.node.body);else if(n.isObjectProperty()){let i=n.get("value");pe(i,t)}})}function ln(e){(0,b.isBlockStatement)(e.body)||(e.body=(0,b.blockStatement)([(0,b.returnStatement)(e.body)]))}function Ke(e){e.directives.some(t=>t.value.value==="worklet")||e.directives.push((0,b.directive)((0,b.directiveLiteral)("worklet")))}function cn(e){e.properties.some(t=>(0,b.isObjectProperty)(t)&&(0,b.isIdentifier)(t.key)&&t.key.name===Ye.contextObjectMarker)||e.properties.push((0,b.objectProperty)((0,b.identifier)(`${Ye.contextObjectMarker}`),(0,b.booleanLiteral)(!0)))}function Qe(e){return e.get("properties").some(r=>r.isObjectMethod()?un(r):!1)}B.isImplicitContextObject=Qe;function un(e){let t=!1;return e.traverse({ThisExpression(r){t=!0,r.stop()}}),t}function dn(e){e.body.push((0,b.classProperty)((0,b.identifier)("__workletClass"),(0,b.booleanLiteral)(!0)))}function fn(e){let t=e.body,r=t.length,n=0;for(;n<r;){let i=t[n];if(!pn(i)){n++;continue}let s=t.splice(n,1);t.push(...s),r--}}function pn(e){return(0,b.isExpressionStatement)(e)&&(0,b.isAssignmentExpression)(e.expression)&&(0,b.isMemberExpression)(e.expression.left)&&(0,b.isIdentifier)(e.expression.left.object)&&e.expression.left.object.name==="exports"}});var tt=m(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.processInlineStylesWarning=void 0;var f=require("@babel/types"),mn=P(),me=require("assert");function bn(e){return(0,f.callExpression)((0,f.arrowFunctionExpression)([],(0,f.blockStatement)([(0,f.expressionStatement)((0,f.callExpression)((0,f.memberExpression)((0,f.identifier)("console"),(0,f.identifier)("warn")),[(0,f.callExpression)((0,f.memberExpression)((0,f.callExpression)((0,f.identifier)("require"),[(0,f.stringLiteral)("react-native-reanimated")]),(0,f.identifier)("getUseOfValueInStyleWarning")),[])])),(0,f.returnStatement)(e.node)])),[])}function yn(e){e.isMemberExpression()&&(0,f.isIdentifier)(e.node.property)&&e.node.property.name==="value"&&e.replaceWith(bn(e))}function kn(e){if((0,f.isArrayExpression)(e.node)){let t=e.get("elements");(0,me.strict)(Array.isArray(t),"[Reanimated] `elements` should be an array.");for(let r of t)r.isObjectExpression()&&be(r)}}function be(e){let t=e.get("properties");for(let r of t)if(r.isObjectProperty()){let n=r.get("value");(0,f.isIdentifier)(r.node.key)&&r.node.key.name==="transform"?kn(n):yn(n)}}function gn(e,t){if((0,mn.isRelease)()||t.opts.disableInlineStylesWarning||e.node.name.name!=="style"||!(0,f.isJSXExpressionContainer)(e.node.value))return;let r=e.get("value").get("expression");if((0,me.strict)(!Array.isArray(r),"[Reanimated] `expression` should not be an array."),r.isArrayExpression()){let n=r.get("elements");(0,me.strict)(Array.isArray(n),"[Reanimated] `elements` should be an array.");for(let i of n)i.isObjectExpression()&&be(i)}else r.isObjectExpression()&&be(r)}re.processInlineStylesWarning=gn});var nt=m(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.substituteWebCallExpression=void 0;var rt=require("@babel/types");function _n(e){let t=e.node.callee;if((0,rt.isIdentifier)(t)){let r=t.name;(r==="isWeb"||r==="shouldBeUseWeb")&&e.replaceWith((0,rt.booleanLiteral)(!0))}}ne.substituteWebCallExpression=_n});Object.defineProperty(exports,"__esModule",{value:!0});var it=Ge(),On=Je(),vn=fe(),hn=et(),En=ae(),In=tt(),Sn=S(),xn=nt(),Wn=$();module.exports=function(){function e(t){try{t()}catch(r){throw new Error(`[Reanimated] Babel plugin exception: ${r}`)}}return{name:"reanimated",pre(){e(()=>{(0,En.initializeState)(this)})},visitor:{CallExpression:{enter(t,r){e(()=>{(0,it.processCalleesAutoworkletizableCallbacks)(t,r),r.opts.substituteWebPlatformChecks&&(0,xn.substituteWebCallExpression)(t)})}},[Sn.WorkletizableFunction]:{enter(t,r){e(()=>{(0,Wn.processIfWithWorkletDirective)(t,r)||(0,it.processIfAutoworkletizableCallback)(t,r)})}},ObjectExpression:{enter(t,r){e(()=>{(0,vn.processIfWorkletContextObject)(t,r)})}},ClassDeclaration:{enter(t,r){e(()=>{(0,On.processIfWorkletClass)(t,r)})}},Program:{enter(t,r){e(()=>{(0,hn.processIfWorkletFile)(t,r)})}},JSXAttribute:{enter(t,r){e(()=>(0,In.processInlineStylesWarning)(t,r))}}}}};
//# sourceMappingURL=index.js.map
