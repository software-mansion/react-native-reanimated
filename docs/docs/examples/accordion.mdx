---
id: Accordion
sidebar_label: Accordion
---

Welcome to this code example that demonstrates the implementation of an accordion item. An accordion is an element which could be expanded and collapsed on click.

The accordion item consists of a header or a button and a content section. When the header/button is clicked, the content beneath it will smoothly expand or collapse, providing a clean and user-friendly way to manage information.

One important thing to note is that when using `SharedValue` to handle state, we avoid unnecessary rerenders, and the work is handled by the animated style.

Let's dive into the code to see how it works and how you can customize it for your specific needs.

```tsx
import {
  View,
  ViewProps
} from "react-native";
import Animated, {
  SharedValue,
  useAnimatedStyle,
  useDerivedValue,
  useSharedValue,
  withTiming
} from "react-native-reanimated";

type AccordionProps = ViewProps & {
  isExpanded: SharedValue<boolean>;
  viewKey: number | string;
  duration?: number;
};

const AccordionItem = ({
  isExpanded,
  children,
  viewKey,
  style,
  duration = 500,
}: AccordionProps) => {
  const height = useSharedValue(0);

  const derivedHeight = useDerivedValue(() =>
    withTiming(height.value * Number(isExpanded.value), {
      duration,
    })
  );
  const bodyStyle = useAnimatedStyle(() => ({
    height: derivedHeight.value,
  }));

  return (
    <Animated.View
      key={`accordionItem_${viewKey}`}
      style={[
        {
          width: "100%",
          overflow: "hidden",
        },
        bodyStyle,
        style,
      ]}
    >
      <View
        onLayout={(e) => {
          height.value = e.nativeEvent.layout.height;
        }}
        style={{ width: "100%", position: "absolute" }}
      >
        {children}
      </View>
    </Animated.View>
  );
};
```

See it live: https://snack.expo.dev/@majronman/accordion-item